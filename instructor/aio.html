<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Programming with Python: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Programming with Python" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Programming with Python" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Programming with Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Programming with Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Python Basics Recap</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-dictionaries.html">2. Dictionaries</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-numpy_essential.html">3. Numpy and Matplotlib Essential</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-software_package_management.html">4. Software Package Management</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-defensive_programming.html">5. Defensive Programming</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-units_and_quantities.html">6. Units and Quantities</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-pandas_essential.html">7. Pandas Essential</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Python Basics Recap</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Python Refresher</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understanding key concepts in Python</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>This course follows on from the python introduction course. To ensure
that we are starting from similar positions, there follows a short
multiple choice quiz on key python concepts that we will be building on
through this course.</p>
<section><h2 class="section-heading" id="variables-and-lists">Variables and Lists<a class="anchor" aria-label="anchor" href="#variables-and-lists"></a>
</h2>
<hr class="half-width">
<div id="assigning-a-value-to-a-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="assigning-a-value-to-a-variable" class="callout-inner">
<h3 class="callout-title">1. Assigning a value to a variable</h3>
<div class="callout-content">
<p>We wish to store the string <code>Cat</code> as a value in the
variable <code>animal</code>, which of these lines of code will do this
for us?</p>
<ol style="list-style-type: decimal">
<li><code>animal = 'Cat'</code></li>
<li><code>animal = Cat</code></li>
<li><code>Cat = animal</code></li>
<li><code>animal(Cat)</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Answer 1 is correct</p>
</div>
</div>
</div>
</div>
<div id="assigning-values-to-a-list" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="assigning-values-to-a-list" class="callout-inner">
<h3 class="callout-title">2. Assigning values to a list</h3>
<div class="callout-content">
<p>We wish to create a list of values, which of these lines of code is
valid to do this?</p>
<ol style="list-style-type: decimal">
<li><code>varlist = [34, 57, '2d']</code></li>
<li><code>varlist = (12, 'vr', 95)</code></li>
<li><code>varlist = 'xcf', 12, 97</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Answer 1 is correct</p>
</div>
</div>
</div>
</div>
<div id="a.-indexing-characters-in-a-string" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a.-indexing-characters-in-a-string" class="callout-inner">
<h3 class="callout-title">3a. Indexing characters in a string</h3>
<div class="callout-content">
<p>Lists and strings both contain multiple indexed values (in the case
of strings these are specifically individual characters rather than
other values). If we have a variable <code>animal</code> which contains
the string <code>penguin</code>, which of these options will print the
first character (<code>p</code>) for us?</p>
<ol style="list-style-type: decimal">
<li><code>print(animal[0])</code></li>
<li><code>print(animal[1])</code></li>
<li><code>print(animal['p'])</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Answer 1 is correct</p>
</div>
</div>
</div>
</div>
<div id="b.-indexing-characters-in-a-string-slicing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="b.-indexing-characters-in-a-string-slicing" class="callout-inner">
<h3 class="callout-title">3b. Indexing characters in a string (slicing)</h3>
<div class="callout-content">
<p>We can also select whole sections of lists and strings, not just
single elements. Using the same variable <code>animal</code>, containing
the string <code>penguin</code>, as above, which of these options will
print the last 2 characters for us? (Note that there is more an one
correct answer)</p>
<ol style="list-style-type: decimal">
<li><code>print(animal[5:])</code></li>
<li><code>print(animal[6:])</code></li>
<li><code>print(animal[6:7])</code></li>
<li><code>print(animal[5:7])</code></li>
<li><code>print(animal[-2:])</code></li>
<li><code>print(animal[:-2])</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Answers 1, 4, and 5 are correct</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="loops">Loops<a class="anchor" aria-label="anchor" href="#loops"></a>
</h2>
<hr class="half-width">
<div id="constructing-a-for-loop" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="constructing-a-for-loop" class="callout-inner">
<h3 class="callout-title">4. Constructing a <code>for</code> loop</h3>
<div class="callout-content">
<p>Please write a simple <code>for</code> loop which will print out each
of the characters in the <code>animal</code> variable one at a time.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="cf">for</span> char <span class="kw">in</span> animal:</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="bu">print</span>(char)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="software-modules">Software Modules<a class="anchor" aria-label="anchor" href="#software-modules"></a>
</h2>
<hr class="half-width">
<div id="loading-new-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="loading-new-functions" class="callout-inner">
<h3 class="callout-title">5. Loading new functions</h3>
<div class="callout-content">
<p>We want to use the functions in the <code>numpy</code> library in our
code. How do we open this library in our code?</p>
<ol style="list-style-type: decimal">
<li><code>import numpy</code></li>
<li><code>load numpy</code></li>
<li><code>open numpy</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Answer 1 is correct</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="if-statements-and-conditionals">If statements and conditionals<a class="anchor" aria-label="anchor" href="#if-statements-and-conditionals"></a>
</h2>
<hr class="half-width">
<div id="conditionals" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="conditionals" class="callout-inner">
<h3 class="callout-title">6. Conditionals</h3>
<div class="callout-content">
<p>Which of these conditional tests returns a <code>True</code>
result?</p>
<ol style="list-style-type: decimal">
<li><code>4 &gt; 3</code></li>
<li><code>'a' != 'b'</code></li>
<li><code>6 &gt;= 6.0</code></li>
<li><code>'3' == 3</code></li>
<li><code>3 &gt; 'c'</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Answers 1, 2, and 3 return <code>True</code> results. 4 returns
<code>False</code>. 5 raises an Error.</p>
</div>
</div>
</div>
</div>
<div id="if-statements" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="if-statements" class="callout-inner">
<h3 class="callout-title">7. If statements</h3>
<div class="callout-content">
<p>What is printed when this <code>if</code> statement is used?</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="cf">if</span> <span class="dv">4</span> <span class="op">&gt;</span> <span class="dv">5</span>:</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'A'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="cf">elif</span> <span class="dv">4</span> <span class="op">&lt;=</span> <span class="dv">5</span>:</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'B'</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="cf">elif</span> <span class="dv">4</span> <span class="op">&lt;</span> <span class="dv">5</span>:</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'C'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'D'</span>)</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>A</code></li>
<li><code>B</code></li>
<li><code>C</code></li>
<li>
<code>B</code> and <code>C</code>
</li>
<li><code>D</code></li>
<li>
<code>A</code> and <code>D</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8"> Show me the solution </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<p><code>B</code>. Both <code>4 &lt;= 5</code> and <code>4 &lt; 5</code>
would return a <code>True</code> result, but the <code>if</code>
statement is exited as soon as the <code>True</code> result is
returned.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>variables</li>
<li>lists</li>
<li>indexing</li>
<li>loops</li>
<li>conditionals</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-dictionaries"><p>Content from <a href="02-dictionaries.html">Dictionaries</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/02-dictionaries.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I work with relational datasets?</li>
<li>How can I access remote data directly in my scripts?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about JSON format</li>
<li>How to create dictionaries</li>
<li>Loading JSON data and working with it</li>
<li>Using web API’s for accessing remote data</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In previous lessons we have learnt about lists and numpy
multi-dimensional arrays, which are designed for working with
structured, tabular, datasets. But much of the data that we use in our
day to day lives, such as that in data catalogs or the communications
between modern digital services, does not fit nicely into these tabular
datasets. Instead unstructured data formats, which use labels or ‘keys’
to identify each data object are needed. One of the most common formats
for such data is the <a href="https://en.wikipedia.org/wiki/JSON" class="external-link">JavaScript Object Notation
(JSON)</a> file format. This format was originally developed to fulfil
the need for a self-contained, flexible format for real-time
server-to-browser communication, and is now used as the basis for many
unstructured data formats.</p>
<p>One example of such usage in research is the storage of metadata for
data, programs, workflows, or any other such object in a <a href="https://www.researchobject.org/ro-crate/" class="external-link">Research Object Crate
(RO-Crate)</a>. These metadata records take the form:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JSON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode json" tabindex="0"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="dt">"@context"</span><span class="fu">:</span> <span class="st">"https://w3id.org/ro/crate/1.1/context"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="dt">"@graph"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>      <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"ro-crate-metadata.json"</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>      <span class="dt">"@type"</span><span class="fu">:</span> <span class="st">"CreativeWork"</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>      <span class="dt">"about"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"./"</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>      <span class="dt">"conformsTo"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"https://w3id.org/ro/crate/1.1"</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>      <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"./"</span><span class="fu">,</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>      <span class="dt">"@type"</span><span class="fu">:</span> <span class="st">"Dataset"</span><span class="fu">,</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>      <span class="dt">"mainEntity"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"tracking_workflow.ga"</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>      <span class="dt">"hasPart"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>          <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"tracking_workflow.ga"</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a>          <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"object_tracking_pipeline.png"</span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>      <span class="dt">"author"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>      <span class="dt">"provider"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a>          <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"#project-1"</span></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb1-36"><a href="#cb1-36" tabindex="-1"></a>      <span class="dt">"license"</span><span class="fu">:</span> <span class="st">"Apache-2.0"</span><span class="fu">,</span></span>
<span id="cb1-37"><a href="#cb1-37" tabindex="-1"></a>      <span class="dt">"sdPublisher"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-38"><a href="#cb1-38" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"#person-1"</span></span>
<span id="cb1-39"><a href="#cb1-39" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb1-40"><a href="#cb1-40" tabindex="-1"></a>      <span class="dt">"sdDatePublished"</span><span class="fu">:</span> <span class="st">"2021-01-01 00:00:00 +0000"</span></span>
<span id="cb1-41"><a href="#cb1-41" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-42"><a href="#cb1-42" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-43"><a href="#cb1-43" tabindex="-1"></a>      <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"#galaxy"</span><span class="fu">,</span></span>
<span id="cb1-44"><a href="#cb1-44" tabindex="-1"></a>      <span class="dt">"@type"</span><span class="fu">:</span> <span class="st">"ComputerLanguage"</span><span class="fu">,</span></span>
<span id="cb1-45"><a href="#cb1-45" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Galaxy"</span><span class="fu">,</span></span>
<span id="cb1-46"><a href="#cb1-46" tabindex="-1"></a>      <span class="dt">"identifier"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-47"><a href="#cb1-47" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"https://galaxyproject.org/"</span></span>
<span id="cb1-48"><a href="#cb1-48" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb1-49"><a href="#cb1-49" tabindex="-1"></a>      <span class="dt">"url"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-50"><a href="#cb1-50" tabindex="-1"></a>        <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"https://galaxyproject.org/"</span></span>
<span id="cb1-51"><a href="#cb1-51" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb1-52"><a href="#cb1-52" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-53"><a href="#cb1-53" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-54"><a href="#cb1-54" tabindex="-1"></a>      <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"#project-1"</span><span class="fu">,</span></span>
<span id="cb1-55"><a href="#cb1-55" tabindex="-1"></a>      <span class="dt">"@type"</span><span class="fu">:</span> <span class="st">"Organization"</span><span class="fu">,</span></span>
<span id="cb1-56"><a href="#cb1-56" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Science Workflows"</span><span class="fu">,</span></span>
<span id="cb1-57"><a href="#cb1-57" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-58"><a href="#cb1-58" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb1-59"><a href="#cb1-59" tabindex="-1"></a>      <span class="dt">"@id"</span><span class="fu">:</span> <span class="st">"#person-1"</span><span class="fu">,</span></span>
<span id="cb1-60"><a href="#cb1-60" tabindex="-1"></a>      <span class="dt">"@type"</span><span class="fu">:</span> <span class="st">"Person"</span><span class="fu">,</span></span>
<span id="cb1-61"><a href="#cb1-61" tabindex="-1"></a>      <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Alice Smith"</span><span class="fu">,</span></span>
<span id="cb1-62"><a href="#cb1-62" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-63"><a href="#cb1-63" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb1-64"><a href="#cb1-64" tabindex="-1"></a><span class="fu">}</span></span></code></pre>
</div>
<p>The layout of this object is organised using
<code>key</code>:<code>value</code> pairs, where the <code>key</code> is
a unique string, and the <code>value</code> can be any data type,
including other data structures. This simple layout allows quite complex
data objects to be constructed.</p>
<section><h2 class="section-heading" id="dictionary">Dictionary<a class="anchor" aria-label="anchor" href="#dictionary"></a>
</h2>
<hr class="half-width">
<p>In python this structure is implemented using the ‘dictionary’
object. Below we will go through the principles of creating and working
with these objects. Then we will introduce a library for working with
JSON files.</p>
<div class="section level3">
<h3 id="creation">Creation<a class="anchor" aria-label="anchor" href="#creation"></a>
</h3>
<p>Lists are created by using square brackets <code>[ ]</code>.</p>
<p>Dictionaries are created by using curly brackets <code>{ }</code>,
e.g.:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>d <span class="op">=</span> {}</span></code></pre>
</div>
<p>The simplest way to create a dictionary with some value is:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>d <span class="op">=</span> {<span class="st">'keyname'</span>: <span class="st">'keyvalue'</span>}</span></code></pre>
</div>
<p>Following the previous example, we can create a python dictionary
using the name of a person as the <em>key</em> and their age as the
<em>value</em>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>d <span class="op">=</span> {<span class="st">'alice'</span>: <span class="dv">35</span>, <span class="st">'bob'</span>: <span class="dv">18</span>}</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">print</span>(d)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>{'alice': 35, 'bob': 18}</code></pre>
</div>
<p>Alternatively, a dictionary object can be created using the
<code>dict</code> function, in a similar manner to using the
<code>list</code> function. When using the <code>dict</code> function we
need to indicate which <em>key</em> is associated with which
<em>value</em>. This can be done in a number of ways, firstly with
tuples:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>d2 <span class="op">=</span> <span class="bu">dict</span>([(<span class="st">'alice'</span>, <span class="dv">35</span>), (<span class="st">'jane'</span>, <span class="dv">24</span>), (<span class="st">'bob'</span>,<span class="dv">18</span>)])</span></code></pre>
</div>
<p>or with direct association:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>d3 <span class="op">=</span> <span class="bu">dict</span>(bob<span class="op">=</span><span class="dv">18</span>, alice<span class="op">=</span><span class="dv">35</span>, jane<span class="op">=</span><span class="dv">24</span>)</span></code></pre>
</div>
<p>or using the special <code>zip</code> function, which can be used to
create a set of tuples from the given iterable lists:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>d4 <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>([<span class="st">'jane'</span>,<span class="st">'alice'</span>,<span class="st">'bob'</span>],[<span class="dv">24</span>,<span class="dv">35</span>,<span class="dv">18</span>]))</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="accessing-elements">Accessing elements<a class="anchor" aria-label="anchor" href="#accessing-elements"></a>
</h3>
<p>To access an element of the dictionary we must use the
<em>key</em>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The age of alice is :'</span>, d[<span class="st">'alice'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The age of alice is: 35</code></pre>
</div>
<p>We can also use a variable to index the dictionary:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>key <span class="op">=</span> <span class="st">'alice'</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The name of the person is used as key:'</span>, key)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The value associated to that key is:'</span>, d[key])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The name of the person is used as key: alice
The value associated to that key is: 35</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="adding-an-element">Adding an element<a class="anchor" aria-label="anchor" href="#adding-an-element"></a>
</h3>
<p>Adding an element to a dictionary is done by creating a new key and
attaching a value to it.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Original dictionary:'</span>, d)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>d[<span class="st">'jane'</span>] <span class="op">=</span> <span class="dv">24</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'New dictionary:'</span>, d)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Original dictionary: {'alice': 35, 'bob': 18}
New dictionary: {'alice': 35, 'bob': 18, 'jane': 24}</code></pre>
</div>
<p>To add one or more new elements we can also use the
<code>update</code> method:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>d_extra <span class="op">=</span> {<span class="st">'tom'</span>: <span class="dv">54</span>, <span class="st">'david'</span>: <span class="dv">87</span>}</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>d.update(d_extra)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Updated dictionary:'</span>, d)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Updated dictionary: {'alice': 35, 'bob': 18, 'jane': 24, 'tom': 54, 'david': 87}</code></pre>
</div>
<div id="dictionary-concatenate-warning" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="dictionary-concatenate-warning" class="callout-inner">
<h3 class="callout-title">Dictionary Concatenate Warning</h3>
<div class="callout-content">
<p>Unlike lists it is not possible to use the <code>+</code> operator to
concatenate dictionaries:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>{<span class="st">'alice'</span>: <span class="dv">35</span>} <span class="op">+</span> {<span class="st">'bob'</span>: <span class="dv">18</span>}</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-39-a6305e6df312&gt; in &lt;module&gt;
----&gt; 1 {'alice': 35} + {'bob': 18}

TypeError: unsupported operand type(s) for +: 'dict' and 'dict'</code></pre>
</div>
</div>
</div>
</div>
<div id="key-uniqueness-warning" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="key-uniqueness-warning" class="callout-inner">
<h3 class="callout-title">Key Uniqueness Warning</h3>
<div class="callout-content">
<p>Keys have to be unique; you cannot have two keys with the same name.
If you try to add an item using a key already present in the dictionary
you will overwrite the previous value.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Original dictionary:'</span>, d)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>d[<span class="st">'alice'</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'New dictionary:'</span>, d)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Original dictionary: {'alice': 35, 'bob': 18, 'jane': 24}
New dictionary: {'alice': 12, 'bob': 18, 'jane': 24}</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="equality-between-dictionaries">Equality between dictionaries<a class="anchor" aria-label="anchor" href="#equality-between-dictionaries"></a>
</h2>
<hr class="half-width">
<p>To be equal, all the elements which compose the first dictionary must
be present in the second, and only those elements.</p>
<p>The position (ordering) is not important.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>d1 <span class="op">=</span> {<span class="st">'alice'</span>: <span class="dv">12</span>, <span class="st">'bob'</span>: <span class="dv">18</span>, <span class="st">'jane'</span>: <span class="dv">24</span>, <span class="st">'tom'</span>: <span class="dv">54</span>, <span class="st">'david'</span>: <span class="dv">87</span>}</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>d2 <span class="op">=</span> {<span class="st">'tom'</span>: <span class="dv">54</span>, <span class="st">'david'</span>: <span class="dv">87</span>}</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>d3 <span class="op">=</span> {<span class="st">'bob'</span>: <span class="dv">18</span>, <span class="st">'alice'</span>: <span class="dv">35</span>, <span class="st">'jane'</span>: <span class="dv">24</span>}</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>d4 <span class="op">=</span> {<span class="st">'alice'</span>: <span class="dv">35</span>, <span class="st">'bob'</span>: <span class="dv">18</span>, <span class="st">'jane'</span>: <span class="dv">24</span>}</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Dictionary 1 and dictionary 2 are equal:'</span>, d1 <span class="op">==</span> d2)</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Dictionary 1 and dictionary 3 are equal:'</span>, d1 <span class="op">==</span> d3)</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Dictionary 3 and dictionary 4 are equal:'</span>, d3 <span class="op">==</span> d4)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Dictionary 1 and dictionary 2 are equal: False
Dictionary 1 and dictionary 3 are equal: False
Dictionary 3 and dictionary 4 are equal: True</code></pre>
</div>
</section><section><h2 class="section-heading" id="splitting-out-keys-and-values">Splitting out keys and values<a class="anchor" aria-label="anchor" href="#splitting-out-keys-and-values"></a>
</h2>
<hr class="half-width">
<p>Dictionaries have some special methods. Two of the most useful are
<code>keys</code> and <code>values</code>. These return the keys and the
values of the dictionary respectively.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>d.keys()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>dict_keys(['alice', 'bob', 'jane', 'tom', 'david'])</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>d.values()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>dict_values([12, 18, 24, 54, 87])</code></pre>
</div>
<p>Note that the <em>dict_keys</em> and <em>dict_values</em> objects are
iterable but are not lists. This means that they can be used somewhere
like a <code>for</code> loop but you can not index them directly.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>d.values()[<span class="dv">0</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
TypeError: 'dict_keys' object is not subscriptable</code></pre>
</div>
<p>If you want to index keys or values directly, you can convert them to
lists with the <code>list</code> function.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="bu">list</span>(d.values())[<span class="dv">0</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">12</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="presence-or-not-of-an-element-inside-a-dictionary">Presence (or not) of an element inside a dictionary<a class="anchor" aria-label="anchor" href="#presence-or-not-of-an-element-inside-a-dictionary"></a>
</h2>
<hr class="half-width">
<p>It is possible to test if a key is present in the dictionary (or not)
using the keyword <code>in</code>, just as we did at the start of this
lesson for values within a list:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">'alice'</span> <span class="kw">in</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">True</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="co">'mark'</span> <span class="kw">in</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">False</span></span></code></pre>
</div>
<p>Note, however, that we can’t directly test for the presence of
values:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="dv">12</span> <span class="kw">in</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">False</span></span></code></pre>
</div>
<p>Instead we would have to use the <code>values</code> method to search
these:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="dv">12</span> <span class="kw">in</span> d.values()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">True</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="json-files">JSON files<a class="anchor" aria-label="anchor" href="#json-files"></a>
</h2>
<hr class="half-width">
<p>Because JSON files are such a widely used format, python has a built
in package for working with JSON, called <code>json</code>: This package
provides the method <code>json.load()</code> to read JSON data from a
file and and convert it to a python dictionary:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'ro-crate-metadata-1.json'</span>) <span class="im">as</span> f:</span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>    data <span class="op">=</span> json.load(f)</span></code></pre>
</div>
<p>The closely related method <code>json.loads()</code> (s for “string”)
reads a string containing JSON and turns it into a Python
dictionary:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>json_string <span class="op">=</span> <span class="st">'{"numbers": [1, 2, 3]}'</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>d <span class="op">=</span> json.loads(json_string)</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>d[<span class="st">'numbers'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1, 2, 3]</code></pre>
</div>
</section><section><h2 class="section-heading" id="http-requests">HTTP requests<a class="anchor" aria-label="anchor" href="#http-requests"></a>
</h2>
<hr class="half-width">
<p>Although lot of information is available on the internet for general
use, without automated tools for accessing this data it is difficult to
make full use of it. Python has a number of libraries for making HTTP
requests, to help with this automation, of which the
<code>requests</code> library is the most commonly used. This library
provides a streamlined application process interface (API) for carrying
out these tasks, and has built in JSON support, for easy digesting of
the retrieved data.</p>
<p>The basic interaction for making a HTTP request is:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>source_url<span class="op">=</span><span class="st">'https://api.datacite.org/dois/10.48546/workflowhub.workflow.56.1'</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>requests.get(source_url)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;Response [200]&gt;</code></pre>
</div>
<p>The HTTP request returns a response code - a value of 200 indicates
the request was successful. There are a wide range of <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" class="external-link">possible
response codes</a>. Those starting as 2XX generally indicate success,
whereas those starting with 4XX indicate a failure of some sort
(including the most common: <code>404 Not Found</code>).</p>
<p>The HTTP request we made returned more than just the response code,
there will also be the attached content that we requested. In this case
our request was made to an API which returns citation information
associated with the DOI <code>10.48546/workflowhub.workflow.56.1</code>.
Rather than being presented as a complex webpage, this information is
returned as a machine-readable string, similar to the JSON file we read
earlier, so we can read this in a similar manner:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>response <span class="op">=</span> requests.get(source_url)</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>record <span class="op">=</span> response.json()</span></code></pre>
</div>
<p>Once the data is in a dictionary we can start exploring it - first
step is to check the keys available:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>record.keys()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>dict_keys(['data'])</code></pre>
</div>
<p>The upper level of the dictionary is simply data - so we can move to
the second level:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>record[<span class="st">'data'</span>].keys()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>dict_keys(['id', 'type', 'attributes', 'relationships'])</code></pre>
</div>
<p>The <code>id</code> contains the DOI that we used to find this entry,
while the <code>attributes</code> contains the metadata for the object
referred to by the DOI. By digging further into the dictionary we can
extract information about the object.</p>
<div id="find-the-title" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-the-title" class="callout-inner">
<h3 class="callout-title">Find the title</h3>
<div class="callout-content">
<p>What is the path to find the title of the object?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>record[<span class="st">'data'</span>][<span class="st">'attributes'</span>][<span class="st">'titles'</span>][<span class="dv">0</span>][<span class="st">'title'</span>]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="find-the-title-part-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-the-title-part-2" class="callout-inner">
<h3 class="callout-title">Find the title (part 2)</h3>
<div class="callout-content">
<p>Assuming that all JSON objects returned by this API follow the same
layout as this record, write a simple function that will return the
title of any DOI it is given.</p>
<p>Test that your function works using the DOI:
<code>10.5281/zenodo.4416028</code></p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="kw">def</span> doi_title( doi_string ):</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>    source_url <span class="op">=</span> <span class="ss">f'https://api.datacite.org/dois/</span><span class="sc">{</span>doi_string<span class="sc">}</span><span class="ss">'</span></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>    response <span class="op">=</span> requests.get(source_url)</span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>    record <span class="op">=</span> response.json()</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>    <span class="cf">return</span>(record[<span class="st">'data'</span>][<span class="st">'attributes'</span>][<span class="st">'titles'</span>][<span class="dv">0</span>][<span class="st">'title'</span>])</span></code></pre>
</div>
<p>Testing the function:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>doi_title(<span class="st">'10.5281/zenodo.4416028'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'Britain Breathing 2016-2019 Air Quality and Meteorological Dataset'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="speed-tests">Speed Tests…<a class="anchor" aria-label="anchor" href="#speed-tests"></a>
</h2>
<hr class="half-width">
<p>Sequences are a great tool but they have one big limitation. The
execution time to find one specific value inside is linear, as can be
shown by fruitless searches for the string <code>x</code> within
increasingly long lists of integers.</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>short_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">100_000</span>))</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>long_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1_000_000</span>))</span></code></pre>
</div>
<p>We use the built-in <code>%timeit</code> function, to test the speed
of these searches:</p>
<div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="op">%</span>timeit <span class="op">-</span>n100 <span class="st">'x'</span> <span class="kw">in</span> short_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2.02 ms ± 529 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="op">%</span>timeit <span class="op">-</span>n100 <span class="st">'x'</span> <span class="kw">in</span> long_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>17.4 ms ± 1.35 ms per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
<p>Note that the increase in search time is (very roughly) linear.</p>
<p>This is a real problem because the membership test is a very useful
and common procedure. So we would like to have something which is not
dependent on the number of elements.</p>
<div id="testing-access-time-for-large-dictionaries" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="testing-access-time-for-large-dictionaries" class="callout-inner">
<h3 class="callout-title">Testing access time for large dictionaries</h3>
<div class="callout-content">
<p>Create two dictionaries, one with 100,000 key:value pairs, the other
with 1,000,000 key:value pairs, using the lists created at the start of
this lesson. Then use these to test the access times for dictionaries
using the <code>%timeit</code> function. How do the access times compare
with those for the lists, are they quicker or slower, and do the access
times scale linearly with the size of the dictionary?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The dictionaries can be created using the <code>zip</code>
method:</p>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>short_hash <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(short_list,short_list))</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>long_hash <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(long_list,long_list))</span></code></pre>
</div>
<p>The access times for the dictionaries are 100-1,000 times faster than
for lists, and the search time does not increase with dictionary
size.</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="ex">%timeit</span> <span class="at">-n100</span> <span class="st">'x'</span> in short_hash</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>34.2 ns ± 2.31 ns per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="ex">%timeit</span> <span class="at">-n100</span> <span class="st">'x'</span> in long_hash</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>48.4 ns ± 5.39 ns per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
<p><strong>Note:</strong> it is likely that your first report back from
the test will look like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The slowest run took 308.65 times longer than the fastest. This could mean that an intermediate result is being cached.
2.52 µs ± 5.91 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
<p>This is because the secret behind the speed of searching a dictionary
is the caching of the keys after the first access to them. Running the
tests a second time will give above test results.</p>
<p>This caching behaviour is very useful for datasets for are accessed
regularly.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>JSON is simple</li>
<li>Dictionaries are defined using <code>key</code>:<code>value</code>
pairs</li>
<li>Dictionaries can be nested, and mixed with lists</li>
<li>Web API’s can be accessed using the <code>requests</code>
library</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-numpy_essential"><p>Content from <a href="03-numpy_essential.html">Numpy and Matplotlib Essential</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/03-numpy_essential.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I select data within tables for processing?</li>
<li>How can I load different data formats?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn about NumPy matrix objects</li>
<li>Learn about masking datasets</li>
<li>Learn about specialised data formats, and how to use them</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>NumPy extends the Python language by providing new types (array,
matrix, masked_array…), functions and methods to realise efficient
numerical calculation using Python. <a href="https://www.numpy.org" class="external-link">NumPy</a> is <em>the</em> numerical library
for Python. It is too big to be covered in one day, so today we will
learn a few of the basic objects and functions.</p>
<p>NumPy is a foundation block for many other python libraries used in
science and data science, e.g.:</p>
<ul>
<li>
<a href="https://www.scipy.org" class="external-link">scipy</a> Fundamental library for
scientific computing (interation, optimisation…)</li>
<li>
<a href="https://pandas.pydata.org" class="external-link">pandas</a> data structure and
data analysis tools</li>
<li>
<a href="https://matplotlib.org" class="external-link">matplotlib</a> Python 2D
plotting</li>
</ul>
<p>And more specialised libraries such as:</p>
<ul>
<li>
<a href="https://www.astropy.org" class="external-link">astropy</a> for astronomy</li>
<li>
<a href="https://www.h5py.org" class="external-link">h5py</a> to interact with HDF5 format
datafiles</li>
<li>
<a href="https://scikit-learn.org" class="external-link">scikit-learn</a> for Machine
Learning</li>
<li>
<a href="https://www.tensorflow.org" class="external-link">TensorFlow</a> for Deep
Learning</li>
</ul>
<p>We are going to learn some of the basic commands not seen in the
first course. We will introduce some of these libraries but keep in mind
that we are just covering the basics so you can understand how to start
using this library. If you find that your interest is piqued and/or they
are applicable to your problem, you can use the documentation to learn
more.</p>
<p>The <em>array</em> is the central object of NumPy. It is a
multi-dimensional object which contains numerical data. The main
difference between NumPy arrays and Python lists is the set of
operations that can be performed on them. In this lesson we are going to
learn a little more about how to use this fundamental library to do any
numerical analysis in Python.</p>
<p>NumPy arrays are good for arrays of numerical data where each
dimension is of a consistent size. Where you want to work with
heterogeneous data and performance is not a problem, working with Python
lists and dictionaries is easier than working with uneven datasets in
NumPy. Similarly, while NumPy arrays do technically support having
different data types in different columns, it is awkward to do and
breaks a lot of the useful NumPy methods. It is best to use libraries
for the specific purpose for which they are designed, so any sort of
tabular data is better handled with something like Pandas.</p>
<p>To start, we are going to import the two libraries <code>numpy</code>
and <code>matplotlib</code> that will be used in this episode.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre>
</div>
<p>Here we import the libraries using a common shorthand for them,
<code>np</code> for <code>numpy</code>, and <code>plt</code> for
<code>matplotlib.pyplot</code>. You will encounter this in many python
scripts using these libraries, and we will continue to use these
shorthands below.</p>
<p>If we wanted to create a <em>list</em> of odd numbers in base Python
we would use <code>range</code> and <code>list</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>odds <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>))</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'odds is type </span><span class="sc">{</span><span class="bu">type</span>(odds)<span class="sc">}</span><span class="ss">, and contains </span><span class="sc">{</span>odds<span class="sc">}</span><span class="ss">'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds is type &lt;class 'list'&gt;, and contains [1, 3, 5, 7, 9]</code></pre>
</div>
<p>To create the same list as a NumPy array we can use the
<code>np.arange</code> function:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>odds_np <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'odds_np is type </span><span class="sc">{</span><span class="bu">type</span>(odds_np)<span class="sc">}</span><span class="ss">, and contains </span><span class="sc">{</span>odds_np<span class="sc">}</span><span class="ss">'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>odds_np is type &lt;class 'numpy.ndarray'&gt;, and contains [1 3 5 7 9]</code></pre>
</div>
<p>Note that we did not need to convert the output of
<code>np.arange</code>, as we did for the output of <code>range</code>,
because <code>np.arange</code> returns a NumPy array directly, rather
than returning a range object.</p>
<div id="numpy-array-addition" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="numpy-array-addition" class="callout-inner">
<h3 class="callout-title">NumPy Array Addition</h3>
<div class="callout-content">
<p>What is the difference between addition of NumPy arrays and lists?
What is the result of these two additions?</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>odds <span class="op">+</span> odds</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>odds_np <span class="op">+</span> odds_np</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>
<code>[1, 3, 5, 7, 9, 1, 3, 5, 7, 9]</code> for both</li>
<li>
<code>[1, 3, 5, 7, 9, 1, 3, 5, 7, 9]</code> for odds, and
<code>[2, 6, 10, 14, 18]</code> for odds_np</li>
<li>
<code>[2, 6, 10, 14, 18]</code> for odds, and
<code>[1, 3, 5, 7, 9, 1, 3, 5, 7, 9]</code> for odds_np</li>
<li>
<code>[2, 6, 10, 14, 18]</code> for both</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The correct answer is (2)</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="reshaping-numpy-arrays">Reshaping NumPy Arrays<a class="anchor" aria-label="anchor" href="#reshaping-numpy-arrays"></a>
</h3>
<p>NumPy arrays are multidimensional objects for storing data (not
necessarily numerical). The shape of the array can be modified using the
method <code>reshape</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>arr <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">18</span>, <span class="dv">2</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>arr_2d <span class="op">=</span> arr.reshape((<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'arr has shape </span><span class="sc">{</span>arr<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">, and contains:'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="bu">print</span>(arr)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'arr_2d has shape </span><span class="sc">{</span>arr_2d<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">, and contains:'</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="bu">print</span>(arr_2d)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>arr has shape (9,), and contains:
[ 1  3  5  7  9 11 13 15 17]
arr_2d has shape (3, 3), and contains:
[[ 1  3  5]
 [ 7  9 11]
 [13 15 17]]</code></pre>
</div>
<p>Checking and changing the type of the data within the array is
relatively straightforward:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">print</span>(arr.dtype)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>arr <span class="op">=</span> arr.astype(<span class="bu">float</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="bu">print</span>(arr.dtype)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">int64</span></span>
<span><span class="va">float64</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="working-with-matrices">Working with Matrices<a class="anchor" aria-label="anchor" href="#working-with-matrices"></a>
</h3>
<p>NumPy arrays are not matrix objects, but NumPy does provide a matrix
object, which has the characteristics of a mathematical matrix:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>mat <span class="op">=</span> np.matrix(arr_2d)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="bu">type</span>(mat)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">numpy.matrix</span></span></code></pre>
</div>
<p>These can be used to carry out matrix multiplication:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>mat <span class="op">*</span> mat</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>matrix([[ 87., 105., 123.],
        [213., 267., 321.],
        [339., 429., 519.]])</code></pre>
</div>
</div>
<section><h2 class="section-heading" id="masked-arrays">Masked Arrays<a class="anchor" aria-label="anchor" href="#masked-arrays"></a>
</h2>
<hr class="half-width">
<p>A very useful tool that NumPy provides for working with experimental
data is the masked array. When you are taking data from an experiment
you always have some data which are not present, or with a bad signal to
noise ratio, or that you cannot use for some other reason. This function
allows you to select which data you wish to work with within your
dataset.</p>
<p>Masked arrays associate a NumPy array with another array composed
only of boolean values (True or False). These tell NumPy whether to use
(or not) the respective element.</p>
<p>To demonstrate this we are going to create a Gaussian function and
use it to generate an example dataset and generate a plot. We will then
add some noise to it and use a masked array to filter out the noisy
data. This represents the kind of processing that can be used for
datasets such as a seismographs, where we would wish to isolate single
events from noisy background data.</p>
<p>Reminder: the Gaussian function is defined by: <img src="../fig/gauss_function.png" alt="Gaussian function equation." class="figure"></p>
<div id="gaussian-function" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="gaussian-function" class="callout-inner">
<h3 class="callout-title">Gaussian Function</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a function called <code>gauss</code> which will take three
arguments (inputs): <strong>x</strong>, <strong>µ</strong>, and
<strong>σ</strong>, as defined above. (x is an array, µ is the position
of the centre of the curve/peak and σ is the width of the bell)</li>
<li>Create a NumPy array using the ‘numpy’ function ‘linspace’ which
will contain 1000 points equally spaced between x=-100 and x=100. Hint:
You can print the help documentation of a function with
‘help(name_of_the_function)’</li>
<li>Using the above gauss function and the array, create a list which
contains the value of the gauss from x=-100 to x=100.</li>
<li>Use the ‘matplotlib’ library to plot the curve with mu=0 and
sigma=10.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> challenge 1: </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="kw">def</span> gauss(x, mu<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fl">1.</span> <span class="op">/</span> (np.sqrt(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> sigma <span class="op">**</span> <span class="dv">2</span>)) <span class="op">*</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>            np.exp( <span class="op">-</span> (x <span class="op">-</span> mu) <span class="op">**</span> <span class="dv">2</span> <span class="op">/</span> (<span class="dv">2</span> <span class="op">*</span> sigma <span class="op">**</span> <span class="dv">2</span>)))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> challenge 2: </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">100</span>, <span class="dv">100</span>, <span class="dv">1000</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> challenge 3: </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>mu <span class="op">=</span> <span class="dv">0</span>   <span class="co"># the position of the center of the peak</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>sigma <span class="op">=</span> <span class="dv">10</span>  <span class="co"># The width of the 'bell'</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>g <span class="op">=</span> gauss(x, mu, sigma)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> challenge 4: </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>plt.plot(x, g)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/gauss_curve.png" alt="Gaussian curve plot" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="noisy-signal">Noisy Signal<a class="anchor" aria-label="anchor" href="#noisy-signal"></a>
</h2>
<hr class="half-width">
<p>Now we are going to add some random noise to that curve. To do it we
can use the NumPy function <code>normal</code> from the module
<code>random</code> provided by NumPy library. We will scale the
magnitude of the noise so it is (roughly) a 10th of the magnitude of the
Gaussian maximum:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>noisy <span class="op">=</span> np.random.normal(g, scale<span class="op">=</span>g.<span class="bu">max</span>() <span class="op">/</span> <span class="dv">10</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>plt.plot(x, noisy)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/gauss_curve_noisy.png" alt="Gaussian curve plot, with random noise added" class="figure mx-auto d-block"></figure><p>To identify any signal in the data we can use the standard deviation
as an estimate of the noise around the mean value of the data.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>stddev_noisy <span class="op">=</span> np.std(noisy)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>mean_noisy <span class="op">=</span> np.mean(noisy)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'standard deviation is: </span><span class="sc">{</span>stddev_noisy<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'mean value is: </span><span class="sc">{</span>mean_noisy<span class="sc">}</span><span class="ss">'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>standard deviation is: 0.011592652442611553
mean value is: 0.005047252119578472</code></pre>
</div>
<p>We will create a mask for the data, by selecting all data points
below this threshold value (we’ll assume here that any signal we might
be interested in is positive):</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>mask <span class="op">=</span> noisy <span class="op">&lt;</span> (stddev_noisy <span class="op">+</span> mean_noisy)</span></code></pre>
</div>
<p>This creates an array of boolean values, the same shape as our
original data, with <code>True</code> values where the conditional
statement has been met.</p>
<p>The mask and noisy data can now be combined using the
<code>array</code> function of the NumPy masked arrays module
(<code>np.ma</code>). Any <code>True</code> value in the mask will
exclude the corresponding element from subsequent computation or
plotting:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>noisy_ma <span class="op">=</span> np.ma.array(noisy, mask<span class="op">=</span>mask)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>plt.plot(noisy_ma)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<figure><img src="../fig/gauss_curve_signal.png" alt="Gaussian curve plot, with only data above threshold plotted" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="working-with-images">Working with images<a class="anchor" aria-label="anchor" href="#working-with-images"></a>
</h2>
<hr class="half-width">
<p>We are going to learn some commands that deal with images. Since most
scientific domains use their own file format, we obviously can not learn
all of them. We will use a typical astronomical image format: the ‘fits’
file.</p>
<p>In the data directory you should find a file called
<code>502nmos.fits</code>.</p>
<p>We need to use the astropy I/O library fits to open this file. This
can be imported as:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="im">import</span> astropy.io.fits <span class="im">as</span> pyfits</span></code></pre>
</div>
<p>The file can now be opened using:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>im1 <span class="op">=</span> pyfits.<span class="bu">open</span>(<span class="st">'data/502nmos.fits'</span>)</span></code></pre>
</div>
<div id="memory-management-for-large-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="memory-management-for-large-files" class="callout-inner">
<h3 class="callout-title">Memory management for large files</h3>
<div class="callout-content">
<p>By default pyfits opens a file with the option
<code>memmap=True</code>. This option opens the fits file without
copying the data into memory and allows us to open very large files
which will not fit into physical memory.</p>
</div>
</div>
</div>
<p>Fits files are composed of a list of HDUs (Header and data units). We
can list the information with the method <code>info</code>.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>im1.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Filename: data/502nmos.fits
No.    Name      Ver    Type      Cards   Dimensions   Format
  0  PRIMARY       1 PrimaryHDU     290   (1600, 1600)   float32
  1  502nmos_cvt.tab    1 TableHDU       353   1R x 49C   [D25.17, D25.17, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, A1, E15.7, I12, I12, D25.17, D25.17, A8, A8, I12, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, I12, I12, I12, I12, I12, I12, I12, I12, A48, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7, E15.7]</code></pre>
</div>
<p>Here we’re only interested in the primary HDU which is an image and
is called <em>PRIMARY</em>. The base file system can be accessed in the
same manner as a dictionary - using either the key
<code>im1['PRIMARY']</code> or the index <code>im1[0]</code>.</p>
<p>The image comprises of two parts: a header, and then the image data.
The header can be accessed using the <code>header</code> attribute:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>im1[<span class="st">'PRIMARY'</span>].header</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>SIMPLE  =                    T / FITS STANDARD
BITPIX  =                  -32 / FITS BITS/PIXEL
NAXIS   =                    2 / NUMBER OF AXES
NAXIS1  =                 1600 /
NAXIS2  =                 1600 /
EXTEND  =                    T / There maybe standard extensions
BSCALE  =                1.0E0 / REAL = TAPE*BSCALE + BZERO
BZERO   =                0.0E0 /
OPSIZE  =                 2112 / PSIZE of original image
ORIGIN  = 'STScI-STSDAS'       / Fitsio version 21-Feb-1996
FITSDATE= '2005-07-01'         / Date FITS file was created
FILENAME= '502nmos_cvt.hhh'    / Original filename
...</code></pre>
</div>
<p>To access the data we use the <code>data</code> attribute:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>imdata <span class="op">=</span> im1[<span class="st">'PRIMARY'</span>].data</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="bu">type</span>(imdata)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'numpy.ndarray'&gt;</code></pre>
</div>
<p>Note that this data is in the form of a NumPy array, and so we can
use our standard NumPy tools for processing and displaying this
data.</p>
<p>To start with we will look at the unprocessed image of the
nebulae:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>plt.imshow(imdata, origin<span class="op">=</span><span class="st">'lower'</span>, cmap<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>plt.colorbar()</span></code></pre>
</div>
<figure><img src="../fig/nebulae_raw.png" alt="Nebulae image in greyscale. Mostly black background, with two small white dots." class="figure mx-auto d-block"></figure><p>As is common for astronomical images, it is difficult to see anything
on this image because a few very bright objects within the frame have
saturated the CCD, and so a linear output shows only a limited number of
pixels.</p>
<p>To improve the visible output we will carry out some simple analysis
of the image, so that we can solve this contrast problem.</p>
<p>First we examine the general stats of the data (using built-in
methods, except for the median, which has to be called from NumPy
directly):</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'mean value im1:'</span>, imdata.mean())</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'median value im1:'</span>, np.median(imdata))</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'max value im1:'</span>, imdata.<span class="bu">max</span>())</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'min value im1:'</span>, imdata.<span class="bu">min</span>())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mean value im1: 6.237272
median value im1: 6.7385635
max value im1: 2925.8718
min value im1: -12.439324</code></pre>
</div>
<p>These show that, while the range is very large, the mean and median
values are both very low, suggesting that there are only a few pixels
with very high values.</p>
<p>This can be confirmed by plotting a histogram of the number of pixels
vs the number of photons:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>hist <span class="op">=</span> plt.hist(imdata.ravel(), bins<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>plt.xlabel(<span class="st">'Number of Photons'</span>)</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>plt.ylabel(<span class="st">'Pixel Count'</span>)</span></code></pre>
</div>
<p><img src="../fig/photon_count_a.png" alt="Histogram showing photon count, with (almost) all values around 0." class="figure">
This confirms our suspicions that many pixels have very low photon
counts.</p>
<div id="flattening-n-d-arrays" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="flattening-n-d-arrays" class="callout-inner">
<h3 class="callout-title">Flattening N-D arrays</h3>
<div class="callout-content">
<p>To plot a histogram of all the data we needed to flatten the two
dimensional data array. This was done using the built-in
<code>ravel</code> function.</p>
</div>
</div>
</div>
<p>To see the full range of photon counts we will use a log scale:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>hist <span class="op">=</span> plt.hist(imdata.ravel(), bins<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>plt.yscale(<span class="st">'log'</span>)</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>plt.xlabel(<span class="st">'Number of Photons'</span>)</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>plt.ylabel(<span class="st">'Pixel Count'</span>)</span></code></pre>
</div>
<figure><img src="../fig/photon_count_b.png" alt="Histogram showing photon count, with a log scale showing the long tail of high values." class="figure mx-auto d-block"></figure><p>While almost all pixels have a photon count of zero (or near zero),
only a few (&lt;1000) photon counts are above 100. There does appear to
be a significant number of pixels with values between these two extremes
though, so we will constrain the range of our x-axis to between the
limits of 1 and 30, to better see these data. The limit of 30 is
obtained through previous analysis - if you were carrying out this
investigation of the data yourself you would use trial and error to find
the best cut-off point for this plot.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>hist <span class="op">=</span> plt.hist(imdata.ravel(), bins<span class="op">=</span><span class="dv">100</span>, <span class="bu">range</span><span class="op">=</span>(<span class="dv">1</span>,<span class="dv">30</span>))</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>plt.xlabel(<span class="st">'Number of Photons'</span>)</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>plt.ylabel(<span class="st">'Pixel Count'</span>)</span></code></pre>
</div>
<p><img src="../fig/photon_count_c.png" alt="Histogram showing photon counts between 1 and 30" class="figure"> We see that
there is a bi-modal distribution, with the largest peak around 8-9
photons, and a smaller peak around 3-4 photons.</p>
<p>Now that we can see that the majority of the data is below a photon
count of 25, we can start manipulating our image plot to see more
details of the nebulae:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>plt.imshow(imdata, origin<span class="op">=</span><span class="st">'lower'</span>, cmap<span class="op">=</span><span class="st">'gray'</span>, vmax<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>plt.colorbar()</span></code></pre>
</div>
<figure><img src="../fig/nebulae_25limit.png" alt="Nebulae image in greyscale, with a photon count limit of 25. Collage of images showing the shape of the nebulae" class="figure mx-auto d-block"></figure><div class="section level3">
<h3 id="masked-arrays-part-2">Masked Arrays (part 2)<a class="anchor" aria-label="anchor" href="#masked-arrays-part-2"></a>
</h3>
<p>Rather than applying the filtering of our data within the plotting
tool, we can instead use masked arrays to filter our data. This allows
for more nuanced filtering of the data.</p>
<p>We begin with creating a mask to remove values greater than 25:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>immasked <span class="op">=</span> np.ma.masked_greater(imdata, <span class="dv">25</span>)</span></code></pre>
</div>
<p>The <code>immasked</code> array contains the <code>imdata</code> data
(you can test this by plotting <code>immasked</code> using
<code>imshow</code> as we did at the start of this section). It also
contains an attribute <code>mask</code>, which is applied to filter the
data when it is plotted. We can plot this directly to see what is being
removed:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>plt.imshow(immasked.mask, cmap<span class="op">=</span><span class="st">'gray'</span>, origin<span class="op">=</span><span class="st">'lower'</span>)</span></code></pre>
</div>
<figure><img src="../fig/nebulae_25mask.png" alt="Nebulae mask image in greyscale, with a photon count limit of 25. A black background, with a few bright dots where the limit is exceeded." class="figure mx-auto d-block"></figure><p>This mask is applied to the data for all built-in functions. But
where we have to directly use a NumPy function we have to make sure we
use the equivalent function in the mask (<code>ma</code>) library:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'original average:'</span>, imdata.mean())</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Masked average:'</span>, immasked.mean())</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'original max:'</span>, imdata.<span class="bu">max</span>())</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Masked max:'</span>, immasked.<span class="bu">max</span>())</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'original min:'</span>, imdata.<span class="bu">min</span>())</span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Masked min:'</span>, immasked.<span class="bu">min</span>())</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'original median:'</span>, np.mean(imdata))</span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Masked median:'</span>, np.ma.median(immasked))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>original average: 6.237272
Masked average: 5.976717048232941

original max: 2925.8718
Masked max: 24.981937

original min: -12.439324
Masked min: -12.439324

original median: 6.237272
Masked median: 6.725283622741699</code></pre>
</div>
<div id="removing-negative-photon-counts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="removing-negative-photon-counts" class="callout-inner">
<h3 class="callout-title">Removing negative photon counts</h3>
<div class="callout-content">
<p>Photon counts cannot be negative, but some of our data is (some is
due to no measurements being taken, and some is also likely due to
sampling errors). So we would like to remove these erroneous data from
our plot too.</p>
<ol style="list-style-type: decimal">
<li>Create a new masked array (<code>immasked2</code>) where the lower
limit is set to zero (you can use the
<code>np.ma.masked_less_equal</code> function to do this).</li>
<li>Update the immasked2.mask to apply both masks (you can use the
logical OR operator <code>|</code> to do this). Then plot the new masked
data array.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> New mask </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>immasked2 <span class="op">=</span> np.ma.masked_less_equal(imdata, <span class="dv">0</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Combining masks </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>immasked2.mask <span class="op">=</span> immasked2.mask <span class="op">|</span> immasked.mask</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a>plt.imshow(immasked2, cmap<span class="op">=</span><span class="st">'gray'</span>, origin<span class="op">=</span><span class="st">'lower'</span>)</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>plt.colorbar()</span></code></pre>
</div>
<figure><img src="../fig/nebulae_25_0mask.png" alt="Nebulae image in greyscale, with a photon count limits of greater than 0 and less than 25. Collage of images showing the shape of the nebulae, and removing parts of the image where no data was collected." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>NumPy arrays are not matrix objects</li>
<li>Array masks can be created using conditional statements</li>
<li>NumPy arrays can be masked to hide data you don’t want to include in
an analysis</li>
<li>NumPy libraries are available for reading a lot of different file
formats</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-04-software_package_management"><p>Content from <a href="04-software_package_management.html">Software Package Management</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/04-software_package_management.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I load new python libraries?</li>
<li>How can I deal with libraries which have competing software
requirements</li>
<li>How can I record the python libraries that I use for my work?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to install a conda package</li>
<li>Learn how to use different conda channels</li>
<li>Learn how to create a new conda environment</li>
<li>Learn how to activate / deactivate conda environments</li>
<li>Learn how to record the setup of a conda environment</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Virtual environments are a useful tool for isolating and managing the
software packages you use. Doing this enables you to track the packages
you use for your work (enabling you to create reproducable environments,
so that others can also use your code). It also allows you to use
packages which might have conflicting requirements (or even different
versions of the same package) without the hassle of haveing to install
and uninstall these each time.</p>
<p>Python has a built in tools for managing virtual environments (<a href="https://docs.python.org/3/tutorial/venv.html" class="external-link">venv</a>) and
packages (<a href="https://pypi.org/project/pip/" class="external-link">pip</a>). However we
will not cover these tools today. While venv and pip are very useful for
managing pure python packages, they are not very flexible when we want
to use packages which are built on other languages (or perhaps do not
use python at all). Another tool, conda, has been built to extend their
functionality to cover these mixed-language packages, for a wide range
of computing platforms, and it is this which we will cover today. More
details on the differences between conda and pip are given in this <a href="https://www.anaconda.com/blog/understanding-conda-and-pip" class="external-link">summary</a>.</p>
<p>The lesson below is not conducted using a python interpreter, but
instead using the unix shell. When you are asked to type in code below,
please do this in a terminal window and not in this browser.</p>
<section><h2 class="section-heading" id="installing-conda">Installing Conda<a class="anchor" aria-label="anchor" href="#installing-conda"></a>
</h2>
<hr class="half-width">
<p>The conda package manager is available to install by itself (using
the miniconda installer), or with a preprepared set of commonly used
packages and a graphical user-interface (GUI) for managing your packages
(using the anaconda installer). Miniconda is a good choice if you have
limited bandwidth or disk space, and are happy to install packages as
you need them using the command line interface (CLI). Anaconda is a good
choice if you have more disk space (it requires &gt;3Gb) and want to use
a GUI.</p>
<p>We will not cover installation in this lesson but more information is
available on both of these conda installers, as well as links for
downloading the installers, here: <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/download.html" class="external-link uri">https://docs.conda.io/projects/conda/en/latest/user-guide/install/download.html</a>.</p>
</section><section><h2 class="section-heading" id="package-channels">Package Channels<a class="anchor" aria-label="anchor" href="#package-channels"></a>
</h2>
<hr class="half-width">
<p>Conda uses “channels”, locations where software packages are stored.
Conda has a default set of these channels that it searches when you
request a package or update. You can modify this list of channels, to
add other public or private channels that you wish to use. One of the
most commonly added is <a href="https://conda-forge.org/" class="external-link">conda-forge</a>, a community channel
with thousands of contributors who use its unified, automated build
infrastructure to share their software with the world. Another
widely-used channel is <a href="https://bioconda.github.io/" class="external-link">bioconda</a>, which is dedicated to
bioinformatics software.</p>
<p>We can see what channels are being used by the command:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--show</span> channels</span></code></pre>
</div>
<p>This will (likely) list the the following:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">channels</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">defaults</span></span></code></pre>
</div>
<p>The channel order is important for determining priority when
installing packages. Those from channels higher in the list will be
given priority over those lower in the list. After this the newer
versions of a package are given priority over older versions of a
package (and then build numbers, for a given version). The order in
which priority is determined can be changed, we won’t cover this today,
but more information can be found in the <a href="https://docs.conda.io/projects/conda/en/4.6.1/user-guide/tasks/manage-channels.html" class="external-link">conda
managing channels</a> documentation.</p>
<p>To add a channel we can use:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--add</span> channels conda-forge</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--show</span> channels</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">channels</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">conda</span><span class="op">-</span><span class="va">forge</span></span>
<span>  <span class="op">-</span> <span class="va">defaults</span></span></code></pre>
</div>
<p>We can repeat this to add as many channels as we need:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--add</span> channels bioconda</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--show</span> channels</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">channels</span><span class="op">:</span></span>
<span>  <span class="op">-</span> <span class="va">bioconda</span></span>
<span>  <span class="op">-</span> <span class="va">conda</span><span class="op">-</span><span class="va">forge</span></span>
<span>  <span class="op">-</span> <span class="va">defaults</span></span></code></pre>
</div>
<p>This adds the new channel to the start of the list. Which gives that
channel highest priority. The documentation for bioconda, however,
recommends a priority order of conda-forge, bioconda, and finally
defaults. To correct the channel order we can simply re-add the
conda-forge channel:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">conda</span> config <span class="at">--add</span> channels conda-forge</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Warning: 'conda-forge' already in 'channels' list, moving to the top</code></pre>
</div>
<p>When we do this we should be warned the channel is already in the
list, but it is being moved up to the highest priority position.</p>
<div id="removing-or-appending-channels" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="removing-or-appending-channels" class="callout-inner">
<h3 class="callout-title">removing or appending channels</h3>
<div class="callout-content">
<p>Channels can be removed using the <code>--remove</code> flag instead
of <code>--add</code>. To add a channel to the end of the list, rather
than the front, we can use <code>--append</code> instead of
<code>--add</code> (and, if we wish to be explicit in our intent to put
a channel at the front of the list we can use <code>--prepend</code>,
which behaves in the exact same way as <code>--add</code>).</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="searching-for-packages">Searching for Packages<a class="anchor" aria-label="anchor" href="#searching-for-packages"></a>
</h2>
<hr class="half-width">
<p>Once you’ve added the channels you wish to use, you can now search
them for the software that you need. This is simply carried out using
<code>conda search</code>. For example, if we wished to find out what
versions of <a href="https://www.gromacs.org/About_Gromacs" class="external-link">Gromacs</a>
are available, we can use:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">conda</span> search gromacs</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Name                       Version           Build  Channel
gromacs                        4.6.5               0  bioconda
gromacs                       2018.3      h470a237_0  bioconda
gromacs                       2018.4      h470a237_0  bioconda
gromacs                       2018.5      h04f5b5a_0  bioconda
gromacs                       2018.6      h04f5b5a_0  bioconda
gromacs                       2018.6      h04f5b5a_1  bioconda
gromacs                       2018.6      hd895feb_2  bioconda
gromacs                         2019      h04f5b5a_0  bioconda
gromacs                       2019.1      h04f5b5a_0  bioconda
gromacs                       2019.1      h04f5b5a_1  bioconda
gromacs                       2019.1      h04f5b5a_2  bioconda
gromacs                       2020.5      hd895feb_1  bioconda
gromacs                       2020.5      hd895feb_2  bioconda
gromacs                       2020.5      hd895feb_3  bioconda
gromacs                       2020.5      hd895feb_4  bioconda
gromacs                       2020.5      hd895feb_5  bioconda
gromacs                       2020.6      h94ec9d8_0  bioconda
gromacs                         2021      hd895feb_0  bioconda
gromacs                         2021      hd895feb_1  bioconda
gromacs                       2021.1      hd895feb_0  bioconda</code></pre>
</div>
<p>This shows you the name of the package you searched for, then the
version of the software, build number (which can increment up as bugs
are fixed, see above for version 2020.5), and the channel that the
package is in.</p>
<p>If we know the version of the software we are interested in we can
narrow this search down. For example, if we are only interested in
gromacs versions greater than <code>2020</code> we can use:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">conda</span> search <span class="st">"gromacs&gt;=2020"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Name                       Version           Build  Channel
gromacs                       2020.5      hd895feb_1  bioconda
gromacs                       2020.5      hd895feb_2  bioconda
gromacs                       2020.5      hd895feb_3  bioconda
gromacs                       2020.5      hd895feb_4  bioconda
gromacs                       2020.5      hd895feb_5  bioconda
gromacs                       2020.6      h94ec9d8_0  bioconda
gromacs                         2021      hd895feb_0  bioconda
gromacs                         2021      hd895feb_1  bioconda
gromacs                       2021.1      hd895feb_0  bioconda</code></pre>
</div>
<p>Note that we’ve put the search string in quotations, in order to
ensure it is passed to conda correctly.</p>
<p>We can also use wildcards in the version string. For example, if we
wish to find all numpy packages with version 1.20:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">conda</span> search <span class="st">"numpy==1.20.*"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># Name                       Version           Build  Channel
numpy                         1.20.0  py37h3795f5d_0  conda-forge
numpy                         1.20.0  py37ha9839cc_0  conda-forge
numpy                         1.20.0  py38h64deac9_0  conda-forge
numpy                         1.20.0  py39h3c955ea_0  conda-forge
numpy                         1.20.1  py37h3795f5d_0  conda-forge
numpy                         1.20.1  py37h43259c0_0  pkgs/main
numpy                         1.20.1  py37ha9839cc_0  conda-forge
numpy                         1.20.1  py37hd6e1bb9_0  pkgs/main
numpy                         1.20.1  py38h43259c0_0  pkgs/main
numpy                         1.20.1  py38h64deac9_0  conda-forge
numpy                         1.20.1  py38hd6e1bb9_0  pkgs/main
numpy                         1.20.1  py39h3c955ea_0  conda-forge
numpy                         1.20.1  py39h43259c0_0  pkgs/main
numpy                         1.20.1  py39hd6e1bb9_0  pkgs/main
numpy                         1.20.2  py37h84c02c4_0  conda-forge
numpy                         1.20.2  py37hc415c66_0  conda-forge
numpy                         1.20.2  py38had91d27_0  conda-forge
numpy                         1.20.2  py39h7eed0ac_0  conda-forge</code></pre>
</div>
<p>Note that the build string now starts with <code>pyXX</code>, where
<code>XX</code> indicates the version of python the package was built
against. When conda packages are dependent on python then they usually
will be built against a number of different versions of python - which
gives more flexibility when trying to create an environment. Also note
that two channels are listed here, the default <code>pkgs/main</code>
and <code>conda-forge</code>. These duplicate some versions, but also
note that <code>conda-forge</code> has the most recent version of the
<code>numpy</code> software, whereas the default channel does not.
<code>conda-forge</code> tends to be updated more frequently than the
default channels.</p>
</section><section><h2 class="section-heading" id="creating-environments">Creating Environments<a class="anchor" aria-label="anchor" href="#creating-environments"></a>
</h2>
<hr class="half-width">
<p>As the range and variety of software used increases, it is becoming
very common for users require a number of different software programs
for their work which need access to different versions of the same
software library. In addition there could be conflicts between the
operating system requirements (as these tend to change slowly, and be
built on reliable software libraries) and the latest version of the
required software package. Usually, installing all this software on the
same system would be very difficult, but if we use virtual environments
to separate these programs and their dependencies, then the task becomes
a lot more simple.</p>
<p>We will start with listing the current environments:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">conda</span> env list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># conda environments:
#
base                  *  /Users/mbessdl2/anaconda3</code></pre>
</div>
<p>This shows you the environments you have installed, and the path
where they are installed. In addition the <code>*</code> indicates which
environment you currently have loaded. In the example above, anaconda is
installed by the user, and is only accessible by that particular user.
However, if anaconda has been installed by the administrator of that
computer then you might something like:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># conda environments:
#
base                  *  /opt/apps/anaconda</code></pre>
</div>
<p>In this case the anaconda install will be accessible for all users,
however no-one other than the administrator will be able to install new
packages into the <code>base</code> environment.</p>
<p>You can list the packages you have installed in your current
environment using:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">conda</span> list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># packages in environment at /Users/mbessdl2/anaconda3:
#
# Name                    Version                   Build  Channel
_anaconda_depends         2019.03                  py37_0
_ipyw_jlab_nb_ext_conf    0.1.0                    py37_0
alabaster                 0.7.12                     py_0    conda-forge
anaconda                  custom                   py37_1
anaconda-client           1.7.2                      py_0    conda-forge
anaconda-navigator        1.9.12                   py37_0
anaconda-project          0.8.3                      py_0    conda-forge
...
zip                       3.0                  h1de35cc_1    conda-forge
zipp                      3.1.0                      py_0    conda-forge
zlib                      1.2.11            h0b31af3_1006    conda-forge
zstd                      1.4.4                he7fca8b_1    conda-forge</code></pre>
</div>
<p>When you begin using conda, as you can see, you are given a default
environment named <code>base</code>. Avoid installing programs into your
base environment, it is better to create separate environments to keep
your programs isolated from each other. A new conda environment can be
created using the command:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> myenv</span></code></pre>
</div>
<p>This will create an environment named myenv (once you press
<code>[y]</code> to proceed). Check this using the
<code>conda env list</code> command.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># conda environments:
#
base                  *  /Users/mbessdl2/anaconda3
myenv                    /Users/mbessdl2/anaconda3/envs/myenv</code></pre>
</div>
<p>This environment will be empty of all packages though, as we can show
by specifying the <code>myenv</code> environment when we list the
installed packages:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">conda</span> list myenv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="co"># packages in environment at /Users/mbessdl2/anaconda3:</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Name                    Version                   Build  Channel</span></span></code></pre>
</div>
<p>We can also specify the packages we want to install when creating an
environment. When this is done conda will work out all the necessary
supporting packages for you. For example, we will create the
<code>myenv</code> environment again, this time installing the <a href="https://www.spyder-ide.org/" class="external-link">spyder</a> IDE package, as well as
the <a href="https://pandas.pydata.org/" class="external-link">pandas</a> and <a href="https://matplotlib.org/" class="external-link">matplotlib</a> packages, which we will
need later:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">--name</span> myenv spyder pandas matplotlib</span></code></pre>
</div>
<p>This will warn you that you are about to overwrite another
environment, press <code>[y]</code> to continue. Conda will then workout
the new environment setup (which can take a little time), and then will
list the packages which are to be downloaded, and those which will be
installed, before asking if you wish to continue. Press <code>[y]</code>
to continue, and then check that the environment exists and that the
packages you expect are installed using <code>conda env list</code>, and
<code>conda list myenv</code> as before.</p>
</section><section><h2 class="section-heading" id="activating-and-deactivating-environments">Activating and Deactivating Environments<a class="anchor" aria-label="anchor" href="#activating-and-deactivating-environments"></a>
</h2>
<hr class="half-width">
<p>Now that we have installed <code>spyder</code> we would like to run
it. However it is not available to us yet:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">which</span> spyder</span></code></pre>
</div>
<p>(if this cannot find the <code>spyder</code> program it will return
nothing)</p>
<p>Before we can use this software, we must activate the environment it
is in. This can be done using:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">conda</span> activate myenv</span></code></pre>
</div>
<p>Once this done you should see the name of the environment you are
using in brackets before your command prompt. (If you have used pip,
this will be familiar.) And you will now be able to access the
program:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">which</span> spyder</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/mbessdl2/anaconda3/envs/myenv/bin/spyder</code></pre>
</div>
<div id="what-if-conda-hasnt-been-configured-yet" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-if-conda-hasnt-been-configured-yet" class="callout-inner">
<h3 class="callout-title">What if conda hasn’t been configured yet?</h3>
<div class="callout-content">
<p>It is possible that <code>conda activate &lt;ENV&gt;</code> will give
you this error:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CommandNotFoundError: Your shell has not been properly configured to use 'conda activate'.
To initialize your shell, run

    $ conda init &lt;SHELL_NAME&gt;

Currently supported shells are:
  - bash
  - fish
  - tcsh
  - xonsh
  - zsh
  - powershell

See 'conda init --help' for more information and options.

IMPORTANT: You may need to close and restart your shell after running 'conda init'.</code></pre>
</div>
<p>This will often happen on computers with a central installation of
anaconda, where the anaconda environment management tools will have not
been initialised (as many users will not need them). This can be
corrected by following the instructions in the error message (assuming
that your current shell is <code>bash</code>, change the last word if
not):</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">conda</span> init bash</span></code></pre>
</div>
<p>This will modify your personal shell configuration (in file
<code>/home/mbessdl2/.bashrc</code> or similar). You will have to close
that shell, and then open another shell for the changes to take
effect.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="installing-software-into-an-existing-environment">Installing Software into an Existing Environment<a class="anchor" aria-label="anchor" href="#installing-software-into-an-existing-environment"></a>
</h2>
<hr class="half-width">
<p>During your work you often will find that you need to add new
software packages to your environment. For example, we will need the
<code>astropy</code> and <code>pint</code> packages for the units and
quantities lesson, and so we should add these now.</p>
<p>To install these packages (into the current environment we are in) we
can use:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">conda</span> install astropy pint</span></code></pre>
</div>
<p>If you are installing packages into an environment which is not
active (or if you want to be certain that you are installing into the
correct environment), you can add <code>-n &lt;ENV&gt;</code>:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-n</span> myenv astropy pint</span></code></pre>
</div>
<p>Uninstalling software can be carried out in a similar manner, using
<code>conda uninstall</code>.</p>
</section><section><h2 class="section-heading" id="recording-and-reproducing-environment-setups">Recording and Reproducing Environment Setups<a class="anchor" aria-label="anchor" href="#recording-and-reproducing-environment-setups"></a>
</h2>
<hr class="half-width">
<p>A big advantage of using virtual environments is the ability to
record the environment in which you carry out your work, so that this
can be shared with others in order to help them replicate your work.</p>
<p>The most basic way to obtain this information is using:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">conda</span> list <span class="at">--export</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># This file may be used to create an environment using:
# $ conda create --name &lt;env&gt; --file &lt;this file&gt;
# platform: linux-64
_libgcc_mutex=0.1=conda_forge
_openmp_mutex=4.5=1_gnu
alabaster=0.7.12=py_0
alsa-lib=1.2.3=h516909a_0
appdirs=1.4.4=pyh9f0ad1d_0
argh=0.26.2=pyh9f0ad1d_1002
arrow=1.1.0=pyhd8ed1ab_1
astroid=2.5.6=py39hf3d152e_0
...
zeromq=4.3.4=h9c3ff4c_0
zipp=3.4.1=pyhd8ed1ab_0
zlib=1.2.11=h516909a_1010
zstd=1.4.9=ha95c52a_0</code></pre>
</div>
<p>This contains similar information to the standard
<code>conda list</code> command, but in a machine readable formation.
The output information can be saved to a text file using
<code>conda list --export &gt; envfile.txt</code>, which can then be
used to recreate the environment elsewhere, using the command
<code>conda create --name &lt;env&gt; --file &lt;this file&gt;</code>.
However, it should be noted that this will be restricted to the
operating system it is created on, and the channel information is not
recorded in this output - so if you have used more than just the default
and conda-forge channels it may be difficult for someone else to
replicate.</p>
<p>A better method is to use:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="ex">conda</span> env export</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>name: myenv
channels:
  - conda-forge
  - bioconda
  - defaults
dependencies:
  - _libgcc_mutex=0.1=conda_forge
  - _openmp_mutex=4.5=1_gnu
  - alabaster=0.7.12=py_0
  - alsa-lib=1.2.3=h516909a_0
  - appdirs=1.4.4=pyh9f0ad1d_0
  - argh=0.26.2=pyh9f0ad1d_1002
  - arrow=1.1.0=pyhd8ed1ab_1
  - astroid=2.5.6=py39hf3d152e_0
 ...
  - zeromq=4.3.4=h9c3ff4c_0
  - zipp=3.4.1=pyhd8ed1ab_0
  - zlib=1.2.11=h516909a_1010
  - zstd=1.4.9=ha95c52a_0
prefix: /home/mbessdl2/.conda/envs/myenv</code></pre>
</div>
<p>This will present the same information, but in the more readable <a href="https://yaml.org/" class="external-link">YAML</a> format, and it will also include the
channel information in the output. This information can be saved as a
text file as before, and used to create a new environment using the
command <code>conda env create</code>. However it is still operating
system specific information.</p>
<p>To create a higher-level record of the environment you can use:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="ex">conda</span> env export <span class="at">--from-history</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>name: myenv
channels:
  - conda-forge
  - bioconda
  - defaults
dependencies:
  - pandas
  - spyder
  - astropy
  - pint
prefix: /home/mbessdl2/.conda/envs/myenv</code></pre>
</div>
<p>This builds a list of only the packages that you explicitly requested
to be installed in that environment. Where you have specified a
particular version of a package, then this will be recorded, but
otherwise the version number will be unconstrained. If you wish to
constrain the version of a package (for example, if a certain feature
you use has been removed in more recent versions of the package), then
you will need to edit this information to specify that (using the
information given by the standard <code>conda list</code> command).</p>
<p>To create a new environment from either of these YAML environment
files, you can use the command:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">--file</span> <span class="op">&lt;</span>env file<span class="op">&gt;</span> --name <span class="op">&lt;</span>env name<span class="op">&gt;</span></span></code></pre>
</div>
<p>The name that you give the environment does not have to be the same
as the name specified in the file, but if you don’t explicitly specify a
name then the name in the file will be used.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>conda virtual environments are useful for installing programs with
differing requirements</li>
<li>
<code>conda config --add channels &lt;channel&gt;</code> adds a new
channel to your list of sources</li>
<li>
<code>conda search &lt;package&gt;</code> will find all available
versions of a package in your list of sources</li>
<li>
<code>conda create -n &lt;env&gt; &lt;package(s)&gt;</code> can be
used to create a virtual environment from a list of packages</li>
<li>
<code>conda install -n &lt;env&gt; &lt;pacakge(s)&gt;</code>
installs packages in a pre-existing environment</li>
<li>
<code>conda activate &lt;env&gt;</code> activates the named
environment, giving access to the software installed there</li>
<li>
<code>conda deactivate</code> deactivates the current
environment</li>
<li>
<code>conda env export --from-history &gt; &lt;file.yml&gt;</code>
creates a portable record of your current environment</li>
<li>
<code>conda env create --file &lt;file.yml&gt; &lt;env&gt;</code>
creates a new environment from an environment file</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-defensive_programming"><p>Content from <a href="05-defensive_programming.html">Defensive Programming</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/05-defensive_programming.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I catch errors in my data?</li>
<li>How can I make best use of error messages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to catch and deal with errors within your code.</li>
<li>Learn how to catch problematic data before it is used in your
code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode we are going to learn about error handling, a python
structure (also common in other programming languages) which will help
us to properly manage the anomalies that can be encountered when
executing our code.</p>
<p>In science most developers write code for themselves and do not feel
the need to use error handling. However, nowadays scientists have to
share their work as more funding agencies are also asking for the code
used in experiments to be published.</p>
<p>More importantly, applications are not expected to crash and we are
going to learn how to avoid this non desirable behaviour.</p>
<div id="what-is-the-problem-with-this-test" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-is-the-problem-with-this-test" class="callout-inner">
<h3 class="callout-title">What is the problem with this test?</h3>
<div class="callout-content">
<p>Please look at the following code. Can you find the fundamental
problem in this test?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">val</span> = 1</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="cf">if</span> <span class="ex">val</span><span class="op">&gt;</span>0 and val<span class="op">&lt;</span>10:</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value: '</span><span class="ex">,</span> val, <span class="st">'is a digit.'</span><span class="kw">)</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="cf">elif</span> <span class="va">val</span><span class="op">=</span>=0:</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value '</span><span class="ex">,</span> val, <span class="st">'is nul'</span><span class="kw">)</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">else:</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value: '</span><span class="ex">,</span> val, <span class="st">'is a number.'</span><span class="kw">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The test assumes that <code>val</code> is a number, and throws an
uncontrolled error if it is not.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">val</span> = <span class="st">'a'</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="cf">if</span> <span class="ex">val</span><span class="op">&gt;</span>0 and val<span class="op">&lt;</span>10:</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value: '</span><span class="ex">,</span> val, <span class="st">'is a digit.'</span><span class="kw">)</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="cf">elif</span> <span class="va">val</span><span class="op">=</span>=0:</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value '</span><span class="ex">,</span> val, <span class="st">'is nul'</span><span class="kw">)</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="ex">else:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="ex">print</span><span class="er">(</span><span class="st">'Value: '</span><span class="ex">,</span> val, <span class="st">'is a number.'</span><span class="kw">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-2-99c0e25bf5e9&gt; in &lt;module&gt;()
      1 val = 'a'
      2
----&gt; 3 if val&gt;0 and val&lt;10:
      4     print('Value: ', val, 'is a digit.')
      5 elif val==0:

TypeError: '&gt;' not supported between instances of 'str' and 'int'</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We can avoid problems like this by wrapping our code in an
<code>if</code> statement:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="cf">if</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">int</span> <span class="kw">or</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">float</span>:</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'val is not a number'</span>)</span></code></pre>
</div>
<p>However, this becomes tedious to implement very quickly, especially
when trying to cover a number of possible errors, which will all need
their own <code>if</code> clauses. This can lead to a lot of duplicated
code, making the code difficult to maintain.</p>
<p>Python provides the <code>try-except</code> structure to avoid this
issue, enabling developers to properly manage any possible errors. The
basic <code>try-except</code> structure is:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="cf">except</span>:</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Val is not a number'</span>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Enter a new number'</span>)</span></code></pre>
</div>
<p>At the top of the statement is the code that we are interested in
executing, which is run in the <code>try</code> statement. If that fails
then the <code>except</code> statement comes into effect, (hopefully)
returning helpful information to the user about what happened and giving
them some guidance on how to avoid the problem in future.</p>
<p>The <code>except</code> statement will catch all errors and so we do
not, initially at least, need to know exactly what errors we are trying
to avoid. However, python does provide error codes, which we can use to
expand the structure to capture specific error types. For the example
above, we would want to capture a <code>TypeError</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>    <span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="cf">except</span> <span class="pp">TypeError</span> <span class="im">as</span> err:</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Val is not a number'</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'But our code does not crash anymore'</span>)</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The run-time error is:'</span>, err)</span></code></pre>
</div>
<p>As with <code>if</code> statements, multiple <code>except</code>
statements can be used, each with a different error test. These can be
followed by an (optional) catch-all bare <code>except</code> statement
(as we started with) to catch any unexpected errors. Note that only one
<code>try</code> statement is allowed in the structure.</p>
<p><code>try-except</code> structures may also contain <code>else</code>
and <code>finally</code> statements (following in order after the
<code>except</code> statements). The <code>else</code> statement will be
executed if no <code>except</code> statements are executed, while the
<code>finally</code> statement will be executed after all other
statements are finished.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="cf">except</span> <span class="pp">TypeError</span> <span class="im">as</span> err:</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Val is not a number'</span>)</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'But our code does not crash anymore'</span>)</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The run-time error is:'</span>, err)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'1/val = '</span>, <span class="dv">1</span><span class="op">/</span>val)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'release memory'</span>)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>    <span class="kw">del</span>(val)</span></code></pre>
</div>
<p>The typical use of the <code>finally</code> statement is to deal with
the release of external resources (such as files or network connections)
whether or not the attempted action has been successful.</p>
<p>More details about errors and exceptions can be found in the <a href="https://docs.python.org/3/tutorial/errors.html" class="external-link">Python
tutorials</a>.</p>
<div id="http-errors" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="http-errors" class="callout-inner">
<h3 class="callout-title">HTTP errors</h3>
<div class="callout-content">
<p>Earlier we were introduced to the <code>requests</code> library. This
is used to access web content, and returns a code indicating the request
status. The <code>raise_for_status</code> function is provided for
testing the request status, which returns a
<code>request.HTTPError</code> if there is an error. For example, if we
request a missing webpage we get this error:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>source_url<span class="op">=</span><span class="st">'https://api.datacite.org/dois/10.48546/workflowhub.workflow.56.1000'</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>response <span class="op">=</span> requests.get(source_url)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>response.raise_for_status()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):

  File "&lt;ipython-input-108-06c23faa067a&gt;", line 3, in &lt;module&gt;
    response.raise_for_status()


  File "/Users/mbessdl2/anaconda3/envs/myenv/lib/python3.9/site-packages/requests/models.py", line 943, in raise_for_status
    raise HTTPError(http_error_msg, response=self)

HTTPError: 404 Client Error: Not Found for url: https://api.datacite.org/dois/10.48546/workflowhub.workflow.56.1000</code></pre>
</div>
<p>Write a <code>try-except</code> structure that uses
<code>raise_for_status</code> and deals with the error without
crashing.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    source_url<span class="op">=</span><span class="st">'https://api.datacite.org/dois/10.48546/workflowhub.workflow.56.1000'</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    response <span class="op">=</span> requests.get(source_url)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    response.raise_for_status()</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="cf">except</span> requests.HTTPError <span class="im">as</span> err:</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="bu">print</span>(err)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>404 Client Error: Not Found for url: https://api.datacite.org/dois/10.48546/workflowhub.workflow.56.1000</code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="assert">Assert<a class="anchor" aria-label="anchor" href="#assert"></a>
</h2>
<hr class="half-width">
<p>The <code>try-except</code> structure is useful for controlling small
chunks of code, where we might reasonably expect that the user can fix
the problem (where it is a program which takes a short time to run), or
where our program itself will fix the problem (such as substituting NaN
values for a failed calculation).</p>
<p>Sometimes, however, it is better to check the data before it is
passed into the code and to trigger an early crash in the program, which
returns a meaningful error. For example, this can be extremely useful in
the case of large numerical calculations that take a long time to run
and which will only use some of the provided variables after a
significant amount of the computational work has already been carried
out. In such situations your user will appreciate being warned early on
that they have provided invalid data.</p>
<p>To conduct such a test we can use an <code>assert</code> statement.
This follows the structure:
<code>assert &lt;test&gt;, &lt;error message&gt;</code>. As an example
of this, we can write the test for non-numerical values as:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>val <span class="op">=</span> <span class="st">'a'</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">float</span> <span class="kw">or</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">int</span>, <span class="st">"Variable has to be a numerical object"</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):

  File "&lt;ipython-input-38-52d27526daab&gt;", line 1, in &lt;module&gt;
    assert type(val) is float or type(val) is int, "Variable has to be a numerical object"

AssertionError: Variable has to be a numerical object</code></pre>
</div>
<p>Like the earlier <code>if</code> statement, this catches the
problematic variable before it reaches our calculation. However it is
far less intrusive code, and assert tests can be added in sequence, so
that we can quickly and easily increase the coverage of such tests.</p>
<div id="testing-for-nans-not-a-number" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="testing-for-nans-not-a-number" class="callout-inner">
<h3 class="callout-title">Testing for NaN’s (Not a Number)</h3>
<div class="callout-content">
<p>Numpy provides Not a Number (nan) values, which can be used to
indicate missing data. These are not caught by the test above:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>val <span class="op">=</span> np.nan</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">float</span> <span class="kw">or</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">int</span>, <span class="st">"Variable has to be a numerical object"</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Value:  nan is a number.</code></pre>
</div>
<p>However numpy does provide the <code>isnan()</code> function for
testing if a value is NaN. Add an assertion test using this which will
raise and error if the value is NaN.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Because the test checks if a value is NaN, we need to add
<code>not</code> before the test, to ensure that the <code>assert</code>
statement fails if it is a NaN:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>val <span class="op">=</span> np.nan</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">float</span> <span class="kw">or</span> <span class="bu">type</span>(val) <span class="kw">is</span> <span class="bu">int</span>, <span class="st">"Variable has to be a numerical object"</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> np.isnan(val), <span class="st">"Variable must not be a NaN"</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="cf">if</span> val<span class="op">&gt;</span><span class="dv">0</span> <span class="kw">and</span> val<span class="op">&lt;</span><span class="dv">10</span>:</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a digit.'</span>)</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="cf">elif</span> val<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value '</span>, val, <span class="st">'is nul'</span>)</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Value: '</span>, val, <span class="st">'is a number.'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):

  File "&lt;ipython-input-52-553a9c93f77a&gt;", line 4, in &lt;module&gt;
    assert not np.isnan(val), "Variable must not be a NaN"

AssertionError: Variable must not be a NaN</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>try-except</code> structures are useful for catching errors as
they occur</li>
<li>
<code>assert</code> structures are useful for forcing errors early,
to avoid wasted effort</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-units_and_quantities"><p>Content from <a href="06-units_and_quantities.html">Units and Quantities</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/06-units_and_quantities.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I ensure consistent units in my code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Creating quantity objects which include values and units</li>
<li>Applying unit conversions</li>
<li>Learn about different types of equivalence for units</li>
<li>Using units for annotating plots</li>
<li>Test different unit libraries</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One of the most common problems in physics and the development of
physical models is related to the conversion and management of physical
units. Without clear management of physical units, and ensuring that the
information passed between different parts of the system is consistent,
accidents such as the <a href="https://en.wikipedia.org/wiki/Mars_Climate_Orbiter" class="external-link">Mars Climate
Orbiter probe crash</a> can occur.</p>
<p>In this lesson we will look at one of the available libraries in
python for helping to avoid such problems. This is the <a href="https://docs.astropy.org/en/stable/units/index.html" class="external-link">units</a>
module in the <a href="https://docs.astropy.org/en/stable/index.html" class="external-link">astropy</a>
library.</p>
<section><h2 class="section-heading" id="installing-a-new-python-library">Installing a new python library<a class="anchor" aria-label="anchor" href="#installing-a-new-python-library"></a>
</h2>
<hr class="half-width">
<p>Following the conda lesson, we install the astropy library using:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">conda</span> install astropy</span></code></pre>
</div>
<p>The <code>units</code> module can then be imported in your scripts
using:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">from</span> astropy <span class="im">import</span> units <span class="im">as</span> u</span></code></pre>
</div>
<p>Importing as <code>u</code> is not necessary, but it is a common
shorthand for this module, and so we’ll use it below.</p>
</section><section><h2 class="section-heading" id="basics">Basics<a class="anchor" aria-label="anchor" href="#basics"></a>
</h2>
<hr class="half-width">
<p>Units can be added to a python variable by multiplying that variable
by the unit:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>length <span class="op">=</span> <span class="fl">26.2</span> <span class="op">*</span> u.meter</span></code></pre>
</div>
<p>(note the use of US spellings for units).</p>
<p>When printing the variable the unit information will now be
attached:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">print</span>(length)</span></code></pre>
</div>
<p>The type of this new variable is an <code>astropy</code>
<code>Quantity</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">type</span>(length)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">astropy.units.quantity.Quantity</span></span></code></pre>
</div>
<p>You can still access the original object using
<code>value</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">print</span>(length.value)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">type</span>(length.value)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">26.2</span></span>
<span><span class="va">float</span></span></code></pre>
</div>
<p>Quantities can be converted to other units, systems or factors, by
using the function <code>to()</code>. For example:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>length.to(u.km)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>length.to(u.lightyear)</span></code></pre>
</div>
<p>This enables the use of arithmetic operations when quantities have
compatible units:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>distance_start <span class="op">=</span> <span class="dv">10</span> <span class="op">*</span> u.mm</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>distance_end <span class="op">=</span> <span class="dv">23</span> <span class="op">*</span> u.km</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>length <span class="op">=</span> distance_end <span class="op">-</span> distance_start</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="bu">print</span>(length)</span></code></pre>
</div>
<p>And it also enables the combining of quantities, for example, to
calculate a speed:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>time <span class="op">=</span> <span class="dv">15</span> <span class="op">*</span> u.minute</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>speed <span class="op">=</span> length <span class="op">/</span> time</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="bu">print</span>(speed)</span></code></pre>
</div>
<p>By default the units library will select units to report for these
values based on what the units are of the objects that you have passed
it. You can, as before, convert these to the units of your choice:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(speed.to(u.km<span class="op">/</span>u.s))</span></code></pre>
</div>
<p>You can also convert the units to the base (irreducible) units for
the unit system you are using with the <code>decompose</code> function
(changing the unit system choice will be covered later):</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="bu">print</span>(speed.decompose())</span></code></pre>
</div>
<div id="choosing-different-base-units" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="choosing-different-base-units" class="callout-inner">
<h3 class="callout-title">Choosing different base units</h3>
<div class="callout-content">
<p>If you wish to reduce to different base units you can pass a list of
those units to the <code>bases</code> parameter when calling the
<code>decompose</code> function:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(speed.decompose(bases<span class="op">=</span>[<span class="st">'km'</span>,<span class="st">'s'</span>]))</span></code></pre>
</div>
<p>Note that the order of the values in the list passed to
<code>bases</code> parameter doesn’t matter. However, the base units you
choose must be either one of the original units used, or a standard base
unit. This function cannot be used to convert from km to cm, for
example. Instead it is useful where you only want to reduce select units
within the object.</p>
</div>
</div>
</div>
<p>You can change the base system using functions such as
<code>si</code> (to change to the default SI units) and <code>cgs</code>
(to change to centimetre-grams-seconds units):</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="bu">print</span>(speed.cgs)</span></code></pre>
</div>
<div id="reducing-more-complex-quantities" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reducing-more-complex-quantities" class="callout-inner">
<h3 class="callout-title">Reducing more complex quantities</h3>
<div class="callout-content">
<p>We have been given some (slightly messy) code that calculates the <a href="https://en.m.wikipedia.org/wiki/Jerk_(physics)" class="external-link">jerk</a>, or rate
of change of acceleration, of a vehicle in the units
<code>m/h/min^2</code>:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>acceleration <span class="op">=</span> (<span class="dv">25</span> <span class="op">*</span> u.meter) <span class="op">/</span> (<span class="dv">15</span> <span class="op">*</span> u.minute) <span class="op">/</span> (<span class="dv">15</span> <span class="op">*</span> u.minute)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>time_change <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> u.hour</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>jerk <span class="op">=</span> acceleration <span class="op">/</span> time_change</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="bu">print</span>(jerk)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0.1111111111111111 m / (h min2)</code></pre>
</div>
<p>For the report we are writing we need to convert this to the units
<code>km/hour^3</code>, which of these changes will do this task for
us?</p>
<ol style="list-style-type: decimal">
<li><code>jerk.decompose(bases=['km','hr'])</code></li>
<li><code>jerk.to(u.km/u.hour**3)</code></li>
<li><code>jerk.to(u.km/u.hour**2)</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Answer 2 is correct. Decompose will only reduce to base units (or
existing units), and so can’t change minutes to hours, or metres to
kilometres. Answer 3 won’t work, because we have to apply the
modification to all units (including those which are already
correct).</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="imperial-units">Imperial Units<a class="anchor" aria-label="anchor" href="#imperial-units"></a>
</h2>
<hr class="half-width">
<p>The <code>units</code> library is focused on scientific notation. To
use units from the (US) imperial system we can import the
<code>imperial</code> library:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">from</span> astropy.units <span class="im">import</span> imperial</span></code></pre>
</div>
<p>These can then be used in the same manner as the standard units:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>speed.to(imperial.mile<span class="op">/</span>u.hour)</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="equivalent-units">Equivalent Units<a class="anchor" aria-label="anchor" href="#equivalent-units"></a>
</h2>
<hr class="half-width">
<p>There are some unit conversions that would initially appear to be
unconvertible. For example, it is possible to convert meters into Hertz.
At first glance it seems to be wrong but if you know the quantities for
wavelength and frequencies, it is indeed a valid conversion: <img src="../fig/light_speed_eqn.png" alt="Equation for speed of light." class="figure">
where:</p>
<ul>
<li>
<em>lambda</em> ~ m</li>
<li>c ~ m/s</li>
<li>~ <em>Hz</em> ~ 1/s</li>
</ul>
<p>This, however, does not work as above:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>(<span class="fl">656.281</span> <span class="op">*</span> u.nm).to(u.Hz)</span></code></pre>
</div>
<p>Instead we need to inform <code>units</code> what unit equivalency we
want it to use, which can be specified with the
<code>equivalencies</code> option:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>(<span class="fl">656.281</span> <span class="op">*</span> u.nm).to(u.Hz, equivalencies<span class="op">=</span>u.spectral())</span></code></pre>
</div>
<p>In this case we use the <code>spectral</code> equivalence library,
which allows conversions between wavelengths, wave number, frequency,
and energy equivalent pairs. There are a number of other built-in
equivalency libraries, for commonly used pairings.</p>
<p>Other built-in equivalencies are:</p>
<ul>
<li>Doppler (<code>dopplr_radio</code>, <code>doppler_optical</code>,
<code>doppler_relativistic</code>)</li>
<li>spectral flux density</li>
<li>temperature</li>
<li>brightness temperature</li>
<li>temperature energy</li>
<li>and you can <a href="https://docs.astropy.org/en/stable/units/equivalencies.html#writing-new-equivalencies" class="external-link">build
your own</a>
</li>
</ul>
<p>Finding equivalencies is possible using the
<code>find_equivalent_units</code> function:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>u.Hz.find_equivalent_units()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Primary name | Unit definition | Aliases
[
  Bq           | 1 / s           | becquerel    ,
  Ci           | 3.7e+10 / s     | curie        ,
  Hz           | 1 / s           | Hertz, hertz ,
]</code></pre>
</div>
<p>This is a quite limited list - to see what is available for other
equivalence libraries, we must specify these when making the
request:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>u.Hz.find_equivalent_units(equivalencies<span class="op">=</span>u.spectral())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Primary name | Unit definition        | Aliases
[
  AU           | 1.49598e+11 m          | au, astronomical_unit            ,
  Angstrom     | 1e-10 m                | AA, angstrom                     ,
  Bq           | 1 / s                  | becquerel                        ,
  Ci           | 3.7e+10 / s            | curie                            ,
  Hz           | 1 / s                  | Hertz, hertz                     ,
  J            | kg m2 / s2             | Joule, joule                     ,
  Ry           | 2.17987e-18 kg m2 / s2 | rydberg                          ,
  cm           | 0.01 m                 | centimeter                       ,
  eV           | 1.60218e-19 kg m2 / s2 | electronvolt                     ,
  earthRad     | 6.3781e+06 m           | R_earth, Rearth                  ,
  erg          | 1e-07 kg m2 / s2       |                                  ,
  jupiterRad   | 7.1492e+07 m           | R_jup, Rjup, R_jupiter, Rjupiter ,
  k            | 100 / m                | Kayser, kayser                   ,
  lyr          | 9.46073e+15 m          | lightyear                        ,
  m            | irreducible            | meter                            ,
  micron       | 1e-06 m                |                                  ,
  pc           | 3.08568e+16 m          | parsec                           ,
  solRad       | 6.957e+08 m            | R_sun, Rsun                      ,
]</code></pre>
</div>
</section><section><h2 class="section-heading" id="angles">Angles<a class="anchor" aria-label="anchor" href="#angles"></a>
</h2>
<hr class="half-width">
<p>The numpy trigonometry functions (<code>np.sin</code>,
<code>np.cos</code>, etc) require angles that are passed to them to be
in radians, rather than degrees. It is inconvenient to have to
explicitly convert from other units to radians every time that you wish
to use these functions, but with units you can have this done implicitly
for you.</p>
<p>The radian unit is <code>u.rad</code>, and it’s equivalencies
are:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>u.rad.find_equivalent_units()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Primary name | Unit definition | Aliases
[
  arcmin       | 0.000290888 rad | arcminute ,
  arcsec       | 4.84814e-06 rad | arcsecond ,
  cycle        | 6.28319 rad     | cy        ,
  deg          | 0.0174533 rad   | degree    ,
  hourangle    | 0.261799 rad    |           ,
  mas          | 4.84814e-09 rad |           ,
  rad          | irreducible     | radian    ,
  uas          | 4.84814e-12 rad |           ,
]</code></pre>
</div>
<p>We can see from this that the degree unit is <code>u.deg</code>, so
we can use this to define our angles:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>angle <span class="op">=</span> <span class="dv">90</span> <span class="op">*</span> u.deg()</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'angle in degrees: </span><span class="sc">{}</span><span class="st">; and in radians: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(angle.value,angle.to(u.rad).value))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>angle in degrees: 90.0; and in radians: 1.5707963267948966</code></pre>
</div>
<p>Now we can pass the angle directly to <code>np.sin</code> without
having to convert directly to radians:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sin of 90 degrees is: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(np.sin(angle)))</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sin of pi/2 radians is: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(np.sin(<span class="fl">1.57079632</span>)))</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sin of 90 degrees is not: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(np.sin(<span class="dv">90</span>)))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sin of 90 degrees is: 1.0
sin of pi/2 radians is: 1.0
sin of 90 degrees is not: 0.8939966636005579</code></pre>
</div>
<div class="section level3">
<h3 id="plotting-quantities">Plotting Quantities<a class="anchor" aria-label="anchor" href="#plotting-quantities"></a>
</h3>
<p>Support has been added for using the units information in matplotlib
plots. To use this we need to import the <code>quantity_support</code>
library:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="im">from</span> astropy.visualization <span class="im">import</span> quantity_support</span></code></pre>
</div>
<p>We will create a numpy array of the angles between 0-180 degrees, and
plot the sin of these:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>angles <span class="op">=</span> np.arange(<span class="dv">181</span>) <span class="op">*</span> u.deg</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>plt.plot(angles, np.sin(angles))</span></code></pre>
</div>
<p><img src="../fig/sin_curve_deg.png" alt="Plot of sin curve for degrees between 0-180" class="figure"> Note that the units
for the x-axis are properly presented. This can be done for any angular
unit we wish:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>plt.plot(angles.to(u.rad), np.sin(angles))</span></code></pre>
</div>
<figure><img src="../fig/sin_curve_rad.png" alt="Plot of sin curve for degrees between 0-180" class="figure mx-auto d-block"></figure>
</div>
</section><section><h2 class="section-heading" id="temperature">Temperature<a class="anchor" aria-label="anchor" href="#temperature"></a>
</h2>
<hr class="half-width">
<p>Each of the temperature scales is considered as using an irreducible
unit in standard usage. As a consequence of this we need to always
specify that we are using the <code>u.temperature</code> equivalences
when we convert between these:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>t2 <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> u.deg_C</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{}</span><span class="st"> is equivalent to </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(t2,t2.to(imperial.Fahrenheit, equivalencies<span class="op">=</span>u.temperature())))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1.0 deg_C is equivalent to 33.8 deg_F</code></pre>
</div>
<p>But, be aware that these are scales, if we wanted to increase a
temperature given in Fahrenheit by 1 degree Celsius, we would not add
33.8 degrees Fahrenheit!</p>
<p>To get the incremental value of 1 degree Celsius in Fahrenheit we
would need to do this:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>t1 <span class="op">=</span> <span class="dv">0</span> <span class="op">*</span> u.deg_C</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>t2 <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> u.deg_C</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{}</span><span class="st"> increment is equivalent to a </span><span class="sc">{}</span><span class="st"> increment'</span>.<span class="bu">format</span>(</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>    t2 <span class="op">-</span> t1,</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>    t2.to(imperial.Fahrenheit,equivalencies<span class="op">=</span>u.temperature())</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>        <span class="op">-</span> t1.to(imperial.Fahrenheit, equivalencies<span class="op">=</span>u.temperature())</span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a>    )</span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1.0 deg_C increment is equivalent to a 1.7999999999999972 deg_F increment</code></pre>
</div>
<p>This is verging on unreadable (as is demonstrated by us having to
split a simple arithmetic expression involving two variables across two
lines of code).</p>
<p>Fortunately there is support for cleaner temperature conversions in
the <a href="https://pint.readthedocs.io/en/latest/index.html" class="external-link">pint</a>
package. This has similar functionality to the <code>astropy.unit</code>
package, but has been built from the ground up with a focus on different
aspects. These include unit parsing and standalone unit definitions,
uncertainties integration, and (important for our example here), cleaner
treatment of temperature units.</p>
<p>Pint can be installed using conda (and the conda-forge channel):</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge pint</span></code></pre>
</div>
<p>The unit registry is loaded using:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="im">from</span> pint <span class="im">import</span> UnitRegistry</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>ureg <span class="op">=</span> UnitRegistry()</span></code></pre>
</div>
<p>A units definition file could be given here if needed, but in this
case we will stick with the default settings.</p>
<p>This library has the temperature units as before:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>t2 <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> ureg.degC</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{}</span><span class="st"> is equivalent to </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(t2,t2.to(ureg.degF)))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1 degree_Celsius is equivalent to 33.79999999999993 degree_Fahrenheit</code></pre>
</div>
<p>But it also includes the concept of temperature increments:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>deltaT <span class="op">=</span> <span class="dv">1</span> <span class="op">*</span> ureg.delta_degC</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="sc">{}</span><span class="st"> is equivalent to </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(deltaT,deltaT.to(ureg.delta_degF)))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1 delta_degree_Celsius is equivalent to 1.7999999999999998 delta_degree_Fahrenheit</code></pre>
</div>
<p>Because of the popularity of python this overlap of functionality of
packages can be common. We would recommend exploring the different
available packages that might cover your requirements before settling on
one. And keep watching out for new packages, and be prepared to switch
when starting new projects if/when you find better packages.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>astropy.units</code> library provides unit support</li>
<li>
<code>Quantity</code> objects are created by multiplying values by
the desired units</li>
<li>The <code>.to()</code> function can be used to convert units</li>
<li>The <code>.decompose()</code> function can be used to convert to the
base (irreducible) units</li>
<li>Equivalences can be found using the
<code>.find_equivalent_units()</code> function</li>
<li>Specific equivalence libraries can be defined using the
<code>equivalences=</code> keyword</li>
<li>Import quantity-support from <code>astropy.visualization</code> to
integrate units with matplotlib for data plotting</li>
<li>The <code>pint</code> library provides similar unit support, but is
better for working with temperature increments</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-07-pandas_essential"><p>Content from <a href="07-pandas_essential.html">Pandas Essential</a></p>
<hr>
<p>Last updated on 2025-04-15 |

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/episodes/07-pandas_essential.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 0 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I work with spreadsheet style datasets?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to load csv data, and obtain simple analyses of the data</li>
<li>Learn how to index data arrays using column/row labels</li>
<li>Learn how to mask data to remove unwanted values</li>
<li>Learn how to plot data directly from pandas</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>This library is based on the numpy library that we discuss in a
previous lesson. It provides python users with a new object that allows
us to work with “relational” or “labelled” data in an easy way. It
provides similar access to data loaded from databases or spreadsheets as
those found in languages like R.</p>
<p>Pandas is designed more for data science than pure numerical analysis
but the required tools can easily be combined together. In addition, the
library provides input/output tools that allow the opening and saving of
data from MS Excel, CSV or HDF5 files.</p>
<p>The library is usually imported as <code>pd</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<p>Later we will need to plot data - so the matplotlib library should be
loaded:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre>
</div>
<p>We will be working with data in the
<code>data/gapminder_gdp_europe.csv</code> file. Open this with a text
editor and look at the data layout.</p>
<p>The data within this file is organised much as you’d expect the data
within a spreadsheet. The first row of the file contains the headers for
each of the columns. The first column contains the name of the
countries, while the remaining columns contain the GDP values for these
countries for each year. Pandas has the <code>read_csv</code> function
for reading structured data such as this, which makes reading the file
easy:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'data/gapminder_gdp_europe.csv'</span>,index_col<span class="op">=</span><span class="st">'country'</span>)</span></code></pre>
</div>
<p>Here we specify that the <code>country</code> column should be used
as the index column (<code>index_col</code>).</p>
<p>This creates a <code>DataFrame</code> object containing the dataset.
This is similar to a numpy array, but has a number of significant
differences. The first is that there are more ways to quickly understand
a pandas dataframe. For example, the <code>info</code> function gives an
overview of the data types and layout of the DataFrame:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>data.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 30 entries, Albania to United Kingdom
Data columns (total 12 columns):
 #   Column          Non-Null Count  Dtype
---  ------          --------------  -----
 0   gdpPercap_1952  30 non-null     float64
 1   gdpPercap_1957  30 non-null     float64
 2   gdpPercap_1962  30 non-null     float64
 3   gdpPercap_1967  30 non-null     float64
 4   gdpPercap_1972  30 non-null     float64
 5   gdpPercap_1977  30 non-null     float64
 6   gdpPercap_1982  30 non-null     float64
 7   gdpPercap_1987  30 non-null     float64
 8   gdpPercap_1992  30 non-null     float64
 9   gdpPercap_1997  30 non-null     float64
 10  gdpPercap_2002  30 non-null     float64
 11  gdpPercap_2007  30 non-null     float64
dtypes: float64(12)
memory usage: 3.0+ KB</code></pre>
</div>
<p>You can also carry out quick analysis of the data using the
<code>describe</code> function:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>data.describe()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 	gdpPercap_1952 	gdpPercap_1957 	gdpPercap_1962  ...
count 	30.000000 	30.000000 	30.000000 ...
mean 	5661.057435 	6963.012816 	8365.486814 ...
std 	3114.060493 	3677.950146 	4199.193906 ...
min 	973.533195 	1353.989176 	1709.683679 ...
25% 	3241.132406 	4394.874315 	5373.536612 ...
50% 	5142.469716 	6066.721495 	7515.733738 ...
75% 	7236.794919 	9597.220820 	10931.085347 ...
max 	14734.232750 	17909.489730 	20431.092700 ...</code></pre>
</div>
<section><h2 class="section-heading" id="accessing-elements-rows-and-columns">Accessing elements, rows, and columns<a class="anchor" aria-label="anchor" href="#accessing-elements-rows-and-columns"></a>
</h2>
<hr class="half-width">
<p>The other major difference to numpy arrays is that we cannot directly
access the array elements using numerical indices such as
<code>data[0,0]</code>. It is possible to access columns of data using
the column headers as indices (for example,
<code>data['gdpPercap_1952']</code>), but this is not recommended.
Instead you should use the <code>iloc</code> and <code>loc</code>
methods.</p>
<p>The <code>iloc</code> method enables us to access the DataFrame as we
would a numpy array:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">print</span>(data.iloc[<span class="dv">0</span>,<span class="dv">0</span>])</span></code></pre>
</div>
<p>while the <code>loc</code> method enables the same access using the
index and column headers:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">print</span>(data.loc[<span class="st">"Albania"</span>, <span class="st">"gdpPercap_1952"</span>])</span></code></pre>
</div>
<p>For both of these methods, we can leave out the column indexes, and
these will all be returned for the specified index row:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(data.loc[<span class="st">"Albania"</span>])</span></code></pre>
</div>
<p>This will not work for column headings (in the inverse of the
<code>data['gdpPercap_1952']</code> method) however. While it is quick
to type, we recommend trying to avoid using this method of slicing the
DataFrame, in favour of the methods described below.</p>
<p>For both of these methods we can use the <code>:</code> character to
select all elements in a row or column. For example, to get all
information for Albania:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">print</span>(data.loc[<span class="st">"Albania"</span>, :])</span></code></pre>
</div>
<p>or:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">print</span>(data.iloc[<span class="dv">0</span>, :])</span></code></pre>
</div>
<p>The <code>:</code> character by itself is shorthand to indicate all
elements across that indice, but it can also be combined with index
values or column headers to specify a slice of the DataArray:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="bu">print</span>(data.loc[<span class="st">"Albania"</span>, <span class="st">'gdpPercap_1962'</span>:<span class="st">'gdpPercap_1972'</span>])</span></code></pre>
</div>
<p>If either end of the slice definition is omitted, then the slice will
run to the end of that indice (just as it does for <code>:</code> by
itself):</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">print</span>(data.loc[<span class="st">"Albania"</span>, <span class="st">'gdpPercap_1962'</span>:])</span></code></pre>
</div>
<p>Slices can also be defined using a list of indexes or column
headings:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>year_list <span class="op">=</span> [<span class="st">'gdpPercap_1952'</span>,<span class="st">'gdpPercap_1967'</span>,<span class="st">'gdpPercap_1982'</span>,<span class="st">'gdpPercap_1997'</span>]</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>country_list <span class="op">=</span> [<span class="st">'Albania'</span>,<span class="st">'Belgium'</span>]</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="bu">print</span>(data.loc[country_list, year_list])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>         gdpPercap_1952  gdpPercap_1967  gdpPercap_1982  gdpPercap_1997
country
Albania     1601.056136     2760.196931     3630.880722     3193.054604
Belgium     8343.105127    13149.041190    20979.845890    27561.196630</code></pre>
</div>
</section><section><h2 class="section-heading" id="masking-data">Masking data<a class="anchor" aria-label="anchor" href="#masking-data"></a>
</h2>
<hr class="half-width">
<p>Pandas data arrays are based on numpy arrays, and retain some of the
numpy tools, such as masked arrays. This enables us to apply selection
criteria to the datasets, so that only the values that we require are
shown. For example, the following selects all data where the GDP is
above $10,000:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>subset <span class="op">=</span> data.loc[<span class="st">'Italy'</span>:<span class="st">'Poland'</span>, <span class="st">'gdpPercap_1962'</span>:<span class="st">'gdpPercap_1972'</span>]</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="bu">print</span>(subset[subset<span class="op">&gt;</span><span class="dv">10000</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>             gdpPercap_1962  gdpPercap_1967  gdpPercap_1972
country
Italy                   NaN     10022.40131     12269.27378
Montenegro              NaN             NaN             NaN
Netherlands     12790.84956     15363.25136     18794.74567
Norway          13450.40151     16361.87647     18965.05551
Poland                  NaN             NaN             NaN</code></pre>
</div>
</section><section><h2 class="section-heading" id="plotting-from-pandas">Plotting from Pandas<a class="anchor" aria-label="anchor" href="#plotting-from-pandas"></a>
</h2>
<hr class="half-width">
<p>Pandas is integrated with matplotlib, and so data can be plotted
directly using the integrated <code>plot</code> method. For example, to
plot the GDP for Sweden:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>data.loc[<span class="st">'Sweden'</span>,:].plot()</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">90</span>)</span></code></pre>
</div>
<p><img src="../fig/sweden-pandas-fig1.png" alt="Line plot of increase in Sweden's GDP from 1952 to 2002, with no axis labels, and awkward x-axis tick labels." class="figure">
Note that we’ve had to rotate the xtick labels by 90 degrees, because
they do not fit neatly under the x-axis. Later we will clean these up
properly.</p>
<p>Note that, in the case above, we passed a single column of data to
the <code>plot</code> method - which it automatically transposed in
order to make sense of the plot request (because this method usually
works on rows of data). If you want to plot more than one column of data
you will need to explicitly transpose the DataFrame yourself.</p>
<p>For example, we will transpose the GDP data for the first 3 countries
in our dataset:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="bu">print</span>(data.iloc[<span class="dv">0</span>:<span class="dv">3</span>,:].T)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>country             Albania       Austria       Belgium
gdpPercap_1952  1601.056136   6137.076492   8343.105127
gdpPercap_1957  1942.284244   8842.598030   9714.960623
gdpPercap_1962  2312.888958  10750.721110  10991.206760
gdpPercap_1967  2760.196931  12834.602400  13149.041190
gdpPercap_1972  3313.422188  16661.625600  16672.143560
gdpPercap_1977  3533.003910  19749.422300  19117.974480
gdpPercap_1982  3630.880722  21597.083620  20979.845890
gdpPercap_1987  3738.932735  23687.826070  22525.563080
gdpPercap_1992  2497.437901  27042.018680  25575.570690
gdpPercap_1997  3193.054604  29095.920660  27561.196630
gdpPercap_2002  4604.211737  32417.607690  30485.883750
gdpPercap_2007  5937.029526  36126.492700  33692.605080</code></pre>
</div>
<p>This data is now ready to be plotted as a histogram - first we set
the style of the plot to match that of the ggplot package in R:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>plt.style.use(<span class="st">'ggplot'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>data.iloc[<span class="dv">0</span>:<span class="dv">3</span>,:].T.plot(kind<span class="op">=</span><span class="st">'bar'</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per capita'</span>)</span></code></pre>
</div>
<figure><img src="../fig/albania_austria_belgium_bar_chart.png" alt="Bar chart showing the increase in GDP for Albania, Austria, and Belgium from 1952 to 2007." class="figure mx-auto d-block"></figure><div id="saving-figures-created-by-pandas" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="saving-figures-created-by-pandas" class="callout-inner">
<h3 class="callout-title">Saving figures created by pandas</h3>
<div class="callout-content">
<p>Some python interpreters will, when creating a figure, present you
with a graphical interface that you can use to save the figure. If,
however, your interface does not do this (or you are writing a script
which will automatically generate and save the figures), then you will
first need to define a matplotlib figure object, and ensure that pandas
plots your figure inside this.</p>
<p>To do this create a matplotlib subplots object, with handles for the
figure (<code>fig</code>) and axis (<code>axs</code>) objects. Pass the
axis object to pandas when plotting your figure (<code>ax=axs</code>),
then use the figure object at the end to save the figure
(<code>fig.savefig</code>).</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots()</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>data.loc[<span class="st">'Albania'</span>:<span class="st">'Belgium'</span>,:].T.plot(kind<span class="op">=</span><span class="st">'bar'</span>,ax<span class="op">=</span>axs)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per capita'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>fig.savefig(<span class="st">'albania-austria-belgium_GDP.png'</span>, bbox_inches<span class="op">=</span><span class="st">'tight'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="changing-column-labels" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="changing-column-labels" class="callout-inner">
<h3 class="callout-title">Changing Column Labels</h3>
<div class="callout-content">
<p>Note that the x-tick labels have been taken directly from the index
values of the transposed DataFrame (which were the original column
labels). These don’t really need to be more than the year of the GDP
values, so we could change the column labels to reflect this.</p>
<p>First we make a new copy of the dataframe (in case anything goes
wrong):</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>gdpPercap <span class="op">=</span> data.copy(deep<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
<p>We have given this new dataframe a more appropriate name, replacing
the information that will be removed from the column headers.</p>
<p>Now we will use the inbuilt <code>str.strip</code> method to clean up
our column labels for the new dataframe. Which of these commands is
correct:</p>
<ol style="list-style-type: decimal">
<li><code>gdpPercap.columns = data.columns.str.strip('gdpPercap_')</code></li>
<li><code>gdpPercap = data.columns.str.strip('gdpPercap_')</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The correct answer is 1. We have to pass the new column labels
explicitly back to the array columns, otherwise all we do is replace the
data array with a list of the new column labels.</p>
</div>
</div>
</div>
</div>
<div id="plotting-gdp-increases-with-time" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-gdp-increases-with-time" class="callout-inner">
<h3 class="callout-title">Plotting GDP increases with time</h3>
<div class="callout-content">
<p>Now that we’ve cleaned up the column labels, we now want to plot the
GDP data for Sweden and Iceland from 1972 onwards. The code block we
will be using is:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>gdp_percap<span class="op">&lt;</span>BLOCK<span class="op">&gt;</span>.T.plot(kind<span class="op">=</span><span class="st">'line'</span>)</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co"># Create legend.</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>plt.ylabel(<span class="st">'GDP per capita ($)'</span>)</span></code></pre>
</div>
<p>Which of the following blocks of code should replace the
<code>&lt;BLOCK&gt;</code> in the code above?</p>
<ol style="list-style-type: decimal">
<li><code>.loc['Sweden':'Iceland','gdpPercap_1972':]</code></li>
<li><code>.loc['gdpPercap_1972':,['Sweden','Iceland']]</code></li>
<li><code>.loc[['Sweden','Iceland'],'gdpPercap_1972':]</code></li>
<li><code>.loc['gdpPercap_1972':,'Sweden':'Iceland']</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The correct answer is 3. The two countries are not adjacent in the
dataset, so we need to use a list to slice them, not a range
(disqualifying answers 1 and 4). At the point where we select the
countries using <code>.loc</code>, we have not yet transposed the
dataset (using <code>.T</code>), so the country names are still indexes,
not column labels, and therefore need to be referenced first (ie in the
first set of square brackets), (disqualifying answers 2 and 4).</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>CSV data is loaded using the <code>load_csv()</code> function</li>
<li>The <code>describe()</code> function gives a quick analysis of the
data</li>
<li>
<code>loc[&lt;index&gt;,&lt;column&gt;]</code> indexes the data
array by the index and column labels</li>
<li>
<code>iloc[&lt;index&gt;,&lt;column&gt;]</code> indexes the data
array using numerical indicies</li>
<li>The data can be sliced by providing index and/or column indicies as
ranges or lists of values</li>
<li>The built-in <code>plot()</code> function can be used to plot the
data using the <code>matplotlib</code> library</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/UoMResearchIT/programming_with_python/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/UoMResearchIT/programming_with_python/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/UoMResearchIT/programming_with_python/" class="external-link">Source</a></p>
				<p><a href="https://github.com/UoMResearchIT/programming_with_python/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:douglas.lowe@manchester.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://uomresearchit.github.io/programming_with_python/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "python, software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://uomresearchit.github.io/programming_with_python/instructor/aio.html",
  "identifier": "https://uomresearchit.github.io/programming_with_python/instructor/aio.html",
  "dateCreated": "2025-04-15",
  "dateModified": "2025-04-15",
  "datePublished": "2025-04-15"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

